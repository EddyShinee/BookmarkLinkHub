const i="/src/newtab/index.html";chrome.runtime.onInstalled.addListener(()=>{chrome.contextMenus.create({id:"add-to-linkhub",title:"Add to LinkHub",contexts:["page"]})});chrome.contextMenus.onClicked.addListener((r,e)=>{if(r.menuItemId==="add-to-linkhub"&&(e!=null&&e.url)&&!e.url.startsWith("chrome://")){const n=new URLSearchParams({add:"1",url:e.url,title:e.title??""});chrome.tabs.create({url:chrome.runtime.getURL(i)+"?"+n.toString()})}});chrome.runtime.onMessage.addListener((r,e,n)=>(r==null?void 0:r.type)!=="CAPTURE_VISIBLE_TAB"?!1:(chrome.windows.getCurrent(o=>{const c=o==null?void 0:o.id,d={format:"png"};chrome.tabs.captureVisibleTab(c,d).then(t=>n({ok:!0,dataUrl:t})).catch(t=>n({ok:!1,error:(t==null?void 0:t.message)??String(t)}))}),!0));
