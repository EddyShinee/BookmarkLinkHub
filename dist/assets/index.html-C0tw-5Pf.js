const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jsQR-DqtlwVZ_.js","assets/globals-DmyaZ-jK.js","assets/globals-B3bMGgpi.css"])))=>i.map(i=>d[i]);
import{r as i,R as Ts,a as Q,b as pt,j as r,c as Ls}from"./globals-DmyaZ-jK.js";import{u as ht,g as Y,s as Vt,B as _s,a as Lr,b as As,c as Ps,d as _r,e as Bs,f as $s,h as K,T as Us,S as Fs}from"./Toast-Dg8RW9Rk.js";/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mt.apply(this,arguments)}var st;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(st||(st={}));const or="popstate";function zs(e){e===void 0&&(e={});function t(a,o){let{pathname:l="/",search:c="",hash:d=""}=mt(a.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),kn("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){let l=a.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let d=a.location.href,u=d.indexOf("#");c=u===-1?d:d.slice(0,u)}return c+"#"+(typeof o=="string"?o:Qt(o))}function s(a,o){sn(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return qs(t,n,s,e)}function ie(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hs(){return Math.random().toString(36).substr(2,8)}function lr(e,t){return{usr:e.state,key:e.key,idx:t}}function kn(e,t,n,s){return n===void 0&&(n=null),Mt({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?mt(t):t,{state:n,key:t&&t.key||s||Hs()})}function Qt(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function mt(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function qs(e,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,c=st.Pop,d=null,u=f();u==null&&(u=0,l.replaceState(Mt({},l.state,{idx:u}),""));function f(){return(l.state||{idx:null}).idx}function h(){c=st.Pop;let p=f(),N=p==null?null:p-u;u=p,d&&d({action:c,location:b.location,delta:N})}function x(p,N){c=st.Push;let S=kn(b.location,p,N);n&&n(S,p),u=f()+1;let j=lr(S,u),R=b.createHref(S);try{l.pushState(j,"",R)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(R)}o&&d&&d({action:c,location:b.location,delta:1})}function g(p,N){c=st.Replace;let S=kn(b.location,p,N);n&&n(S,p),u=f();let j=lr(S,u),R=b.createHref(S);l.replaceState(j,"",R),o&&d&&d({action:c,location:b.location,delta:0})}function C(p){let N=a.location.origin!=="null"?a.location.origin:a.location.href,S=typeof p=="string"?p:Qt(p);return S=S.replace(/ $/,"%20"),ie(N,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,N)}let b={get action(){return c},get location(){return e(a,l)},listen(p){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(or,h),d=p,()=>{a.removeEventListener(or,h),d=null}},createHref(p){return t(a,p)},createURL:C,encodeLocation(p){let N=C(p);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:g,go(p){return l.go(p)}};return b}var ir;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ir||(ir={}));function Ws(e,t,n){return n===void 0&&(n="/"),Js(e,t,n)}function Js(e,t,n,s){let a=typeof t=="string"?mt(t):t,o=_n(a.pathname||"/",n);if(o==null)return null;let l=Ar(e);Ks(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let u=aa(o);c=na(l[d],u)}return c}function Ar(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(o,l,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(ie(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let u=at([s,d.relativePath]),f=n.concat(d);o.children&&o.children.length>0&&(ie(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Ar(o.children,t,f,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:ea(u,o.index),routesMeta:f})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))a(o,l);else for(let d of Pr(o.path))a(o,l,d)}),t}function Pr(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=Pr(s.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&c.push(...l),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function Ks(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ta(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const Xs=/^:[\w-]+$/,Ys=3,Vs=2,Qs=1,Gs=10,Zs=-2,cr=e=>e==="*";function ea(e,t){let n=e.split("/"),s=n.length;return n.some(cr)&&(s+=Zs),t&&(s+=Vs),n.filter(a=>!cr(a)).reduce((a,o)=>a+(Xs.test(o)?Ys:o===""?Qs:Gs),s)}function ta(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function na(e,t,n){let{routesMeta:s}=e,a={},o="/",l=[];for(let c=0;c<s.length;++c){let d=s[c],u=c===s.length-1,f=o==="/"?t:t.slice(o.length)||"/",h=ra({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},f),x=d.route;if(!h)return null;Object.assign(a,h.params),l.push({params:a,pathname:at([o,h.pathname]),pathnameBase:da(at([o,h.pathnameBase])),route:x}),h.pathnameBase!=="/"&&(o=at([o,h.pathnameBase]))}return l}function ra(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=sa(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:s.reduce((u,f,h)=>{let{paramName:x,isOptional:g}=f;if(x==="*"){let b=c[h]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const C=c[h];return g&&!C?u[x]=void 0:u[x]=(C||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:l,pattern:e}}function sa(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),sn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function aa(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return sn(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _n(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}const oa=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,la=e=>oa.test(e);function ia(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?mt(e):e,o;if(n)if(la(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),sn(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=dr(n.substring(1),"/"):o=dr(n,t)}else o=t;return{pathname:o,search:ua(s),hash:fa(a)}}function dr(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function gn(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ca(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function An(e,t){let n=ca(e);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Pn(e,t,n,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=mt(e):(a=Mt({},e),ie(!a.pathname||!a.pathname.includes("?"),gn("?","pathname","search",a)),ie(!a.pathname||!a.pathname.includes("#"),gn("#","pathname","hash",a)),ie(!a.search||!a.search.includes("#"),gn("#","search","hash",a)));let o=e===""||a.pathname==="",l=o?"/":a.pathname,c;if(l==null)c=n;else{let h=t.length-1;if(!s&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),h-=1;a.pathname=x.join("/")}c=h>=0?t[h]:"/"}let d=ia(a,c),u=l&&l!=="/"&&l.endsWith("/"),f=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(u||f)&&(d.pathname+="/"),d}const at=e=>e.join("/").replace(/\/\/+/g,"/"),da=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ua=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,fa=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ha(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Br=["post","put","patch","delete"];new Set(Br);const ma=["get",...Br];new Set(ma);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Tt.apply(this,arguments)}const Bn=i.createContext(null),xa=i.createContext(null),ot=i.createContext(null),an=i.createContext(null),lt=i.createContext({outlet:null,matches:[],isDataRoute:!1}),$r=i.createContext(null);function pa(e,t){let{relative:n}=t===void 0?{}:t;bt()||ie(!1);let{basename:s,navigator:a}=i.useContext(ot),{hash:o,pathname:l,search:c}=Fr(e,{relative:n}),d=l;return s!=="/"&&(d=l==="/"?s:at([s,l])),a.createHref({pathname:d,search:c,hash:o})}function bt(){return i.useContext(an)!=null}function At(){return bt()||ie(!1),i.useContext(an).location}function Ur(e){i.useContext(ot).static||i.useLayoutEffect(e)}function on(){let{isDataRoute:e}=i.useContext(lt);return e?Ra():ga()}function ga(){bt()||ie(!1);let e=i.useContext(Bn),{basename:t,future:n,navigator:s}=i.useContext(ot),{matches:a}=i.useContext(lt),{pathname:o}=At(),l=JSON.stringify(An(a,n.v7_relativeSplatPath)),c=i.useRef(!1);return Ur(()=>{c.current=!0}),i.useCallback(function(u,f){if(f===void 0&&(f={}),!c.current)return;if(typeof u=="number"){s.go(u);return}let h=Pn(u,JSON.parse(l),o,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:at([t,h.pathname])),(f.replace?s.replace:s.push)(h,f.state,f)},[t,s,l,o,e])}function Fr(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=i.useContext(ot),{matches:a}=i.useContext(lt),{pathname:o}=At(),l=JSON.stringify(An(a,s.v7_relativeSplatPath));return i.useMemo(()=>Pn(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function ba(e,t){return va(e,t)}function va(e,t,n,s){bt()||ie(!1);let{navigator:a}=i.useContext(ot),{matches:o}=i.useContext(lt),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let u=At(),f;if(t){var h;let p=typeof t=="string"?mt(t):t;d==="/"||(h=p.pathname)!=null&&h.startsWith(d)||ie(!1),f=p}else f=u;let x=f.pathname||"/",g=x;if(d!=="/"){let p=d.replace(/^\//,"").split("/");g="/"+x.replace(/^\//,"").split("/").slice(p.length).join("/")}let C=Ws(e,{pathname:g}),b=Ca(C&&C.map(p=>Object.assign({},p,{params:Object.assign({},c,p.params),pathname:at([d,a.encodeLocation?a.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?d:at([d,a.encodeLocation?a.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),o,n,s);return t&&b?i.createElement(an.Provider,{value:{location:Tt({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:st.Pop}},b):b}function ya(){let e=Da(),t=ha(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}const wa=i.createElement(ya,null);class ja extends i.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?i.createElement(lt.Provider,{value:this.props.routeContext},i.createElement($r.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Na(e){let{routeContext:t,match:n,children:s}=e,a=i.useContext(Bn);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(lt.Provider,{value:t},s)}function Ca(e,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,c=(a=n)==null?void 0:a.errors;if(c!=null){let f=l.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);f>=0||ie(!1),l=l.slice(0,Math.min(l.length,f+1))}let d=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<l.length;f++){let h=l[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=f),h.route.id){let{loaderData:x,errors:g}=n,C=h.route.loader&&x[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||C){d=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((f,h,x)=>{let g,C=!1,b=null,p=null;n&&(g=c&&h.route.id?c[h.route.id]:void 0,b=h.route.errorElement||wa,d&&(u<0&&x===0?(Oa("route-fallback"),C=!0,p=null):u===x&&(C=!0,p=h.route.hydrateFallbackElement||null)));let N=t.concat(l.slice(0,x+1)),S=()=>{let j;return g?j=b:C?j=p:h.route.Component?j=i.createElement(h.route.Component,null):h.route.element?j=h.route.element:j=f,i.createElement(Na,{match:h,routeContext:{outlet:f,matches:N,isDataRoute:n!=null},children:j})};return n&&(h.route.ErrorBoundary||h.route.errorElement||x===0)?i.createElement(ja,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:S(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):S()},null)}var zr=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(zr||{}),Hr=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Hr||{});function Sa(e){let t=i.useContext(Bn);return t||ie(!1),t}function ka(e){let t=i.useContext(xa);return t||ie(!1),t}function Ea(e){let t=i.useContext(lt);return t||ie(!1),t}function qr(e){let t=Ea(),n=t.matches[t.matches.length-1];return n.route.id||ie(!1),n.route.id}function Da(){var e;let t=i.useContext($r),n=ka(),s=qr();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function Ra(){let{router:e}=Sa(zr.UseNavigateStable),t=qr(Hr.UseNavigateStable),n=i.useRef(!1);return Ur(()=>{n.current=!0}),i.useCallback(function(a,o){o===void 0&&(o={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Tt({fromRouteId:t},o)))},[e,t])}const ur={};function Oa(e,t,n){ur[e]||(ur[e]=!0)}function Ia(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Wt(e){let{to:t,replace:n,state:s,relative:a}=e;bt()||ie(!1);let{future:o,static:l}=i.useContext(ot),{matches:c}=i.useContext(lt),{pathname:d}=At(),u=on(),f=Pn(t,An(c,o.v7_relativeSplatPath),d,a==="path"),h=JSON.stringify(f);return i.useEffect(()=>u(JSON.parse(h),{replace:n,state:s,relative:a}),[u,h,a,n,s]),null}function Dt(e){ie(!1)}function Ma(e){let{basename:t="/",children:n=null,location:s,navigationType:a=st.Pop,navigator:o,static:l=!1,future:c}=e;bt()&&ie(!1);let d=t.replace(/^\/*/,"/"),u=i.useMemo(()=>({basename:d,navigator:o,static:l,future:Tt({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);typeof s=="string"&&(s=mt(s));let{pathname:f="/",search:h="",hash:x="",state:g=null,key:C="default"}=s,b=i.useMemo(()=>{let p=_n(f,d);return p==null?null:{location:{pathname:p,search:h,hash:x,state:g,key:C},navigationType:a}},[d,f,h,x,g,C,a]);return b==null?null:i.createElement(ot.Provider,{value:u},i.createElement(an.Provider,{children:n,value:b}))}function Ta(e){let{children:t,location:n}=e;return ba(En(t),n)}new Promise(()=>{});function En(e,t){t===void 0&&(t=[]);let n=[];return i.Children.forEach(e,(s,a)=>{if(!i.isValidElement(s))return;let o=[...t,a];if(s.type===i.Fragment){n.push.apply(n,En(s.props.children,o));return}s.type!==Dt&&ie(!1),!s.props.index||!s.props.children||ie(!1);let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=En(s.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dn(){return Dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Dn.apply(this,arguments)}function La(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,o;for(o=0;o<s.length;o++)a=s[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function _a(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Aa(e,t){return e.button===0&&(!t||t==="_self")&&!_a(e)}const Pa=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ba="6";try{window.__reactRouterVersion=Ba}catch{}const $a="startTransition",fr=Ts[$a];function Ua(e){let{basename:t,children:n,future:s,window:a}=e,o=i.useRef();o.current==null&&(o.current=zs({window:a,v5Compat:!0}));let l=o.current,[c,d]=i.useState({action:l.action,location:l.location}),{v7_startTransition:u}=s||{},f=i.useCallback(h=>{u&&fr?fr(()=>d(h)):d(h)},[d,u]);return i.useLayoutEffect(()=>l.listen(f),[l,f]),i.useEffect(()=>Ia(s),[s]),i.createElement(Ma,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:s})}const Fa=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",za=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wr=i.forwardRef(function(t,n){let{onClick:s,relative:a,reloadDocument:o,replace:l,state:c,target:d,to:u,preventScrollReset:f,viewTransition:h}=t,x=La(t,Pa),{basename:g}=i.useContext(ot),C,b=!1;if(typeof u=="string"&&za.test(u)&&(C=u,Fa))try{let j=new URL(window.location.href),R=u.startsWith("//")?new URL(j.protocol+u):new URL(u),I=_n(R.pathname,g);R.origin===j.origin&&I!=null?u=I+R.search+R.hash:b=!0}catch{}let p=pa(u,{relative:a}),N=Ha(u,{replace:l,state:c,target:d,preventScrollReset:f,relative:a,viewTransition:h});function S(j){s&&s(j),j.defaultPrevented||N(j)}return i.createElement("a",Dn({},x,{href:C||p,onClick:b||o?s:S,ref:n,target:d}))});var hr;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(hr||(hr={}));var mr;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(mr||(mr={}));function Ha(e,t){let{target:n,replace:s,state:a,preventScrollReset:o,relative:l,viewTransition:c}=t===void 0?{}:t,d=on(),u=At(),f=Fr(e,{relative:l});return i.useCallback(h=>{if(Aa(h,n)){h.preventDefault();let x=s!==void 0?s:Qt(u)===Qt(f);d(e,{replace:x,state:a,preventScrollReset:o,relative:l,viewTransition:c})}},[u,d,f,s,a,n,e,o,l,c])}function qa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>s=>{t.forEach(a=>a(s))},t)}const ln=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function $n(e){return"nodeType"in e}function Ne(e){var t,n;return e?vt(e)?e:$n(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Un(e){const{Document:t}=Ne(e);return e instanceof t}function Pt(e){return vt(e)?!1:e instanceof Ne(e).HTMLElement}function Jr(e){return e instanceof Ne(e).SVGElement}function yt(e){return e?vt(e)?e.document:$n(e)?Un(e)?e:Pt(e)||Jr(e)?e.ownerDocument:document:document:document}const qe=ln?i.useLayoutEffect:i.useEffect;function cn(e){const t=i.useRef(e);return qe(()=>{t.current=e}),i.useCallback(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t.current==null?void 0:t.current(...s)},[])}function Wa(){const e=i.useRef(null),t=i.useCallback((s,a)=>{e.current=setInterval(s,a)},[]),n=i.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Lt(e,t){t===void 0&&(t=[e]);const n=i.useRef(e);return qe(()=>{n.current!==e&&(n.current=e)},t),n}function Bt(e,t){const n=i.useRef();return i.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function Gt(e){const t=cn(e),n=i.useRef(null),s=i.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,s]}function Zt(e){const t=i.useRef();return i.useEffect(()=>{t.current=e},[e]),t.current}let bn={};function $t(e,t){return i.useMemo(()=>{if(t)return t;const n=bn[e]==null?0:bn[e]+1;return bn[e]=n,e+"-"+n},[e,t])}function Kr(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.reduce((o,l)=>{const c=Object.entries(l);for(const[d,u]of c){const f=o[d];f!=null&&(o[d]=f+e*u)}return o},{...t})}}const gt=Kr(1),en=Kr(-1);function Ja(e){return"clientX"in e&&"clientY"in e}function dn(e){if(!e)return!1;const{KeyboardEvent:t}=Ne(e.target);return t&&e instanceof t}function Ka(e){if(!e)return!1;const{TouchEvent:t}=Ne(e.target);return t&&e instanceof t}function tn(e){if(Ka(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Ja(e)?{x:e.clientX,y:e.clientY}:null}const et=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[et.Translate.toString(e),et.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),xr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Xa(e){return e.matches(xr)?e:e.querySelector(xr)}const Ya={display:"none"};function Va(e){let{id:t,value:n}=e;return Q.createElement("div",{id:t,style:Ya},n)}function Qa(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Q.createElement("div",{id:t,style:a,role:"status","aria-live":s,"aria-atomic":!0},n)}function Ga(){const[e,t]=i.useState("");return{announce:i.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const Xr=i.createContext(null);function Za(e){const t=i.useContext(Xr);i.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function eo(){const[e]=i.useState(()=>new Set),t=i.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[i.useCallback(s=>{let{type:a,event:o}=s;e.forEach(l=>{var c;return(c=l[a])==null?void 0:c.call(l,o)})},[e]),t]}const to={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},no={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ro(e){let{announcements:t=no,container:n,hiddenTextDescribedById:s,screenReaderInstructions:a=to}=e;const{announce:o,announcement:l}=Ga(),c=$t("DndLiveRegion"),[d,u]=i.useState(!1);if(i.useEffect(()=>{u(!0)},[]),Za(i.useMemo(()=>({onDragStart(h){let{active:x}=h;o(t.onDragStart({active:x}))},onDragMove(h){let{active:x,over:g}=h;t.onDragMove&&o(t.onDragMove({active:x,over:g}))},onDragOver(h){let{active:x,over:g}=h;o(t.onDragOver({active:x,over:g}))},onDragEnd(h){let{active:x,over:g}=h;o(t.onDragEnd({active:x,over:g}))},onDragCancel(h){let{active:x,over:g}=h;o(t.onDragCancel({active:x,over:g}))}}),[o,t])),!d)return null;const f=Q.createElement(Q.Fragment,null,Q.createElement(Va,{id:s,value:a.draggable}),Q.createElement(Qa,{id:c,announcement:l}));return n?pt.createPortal(f,n):f}var he;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(he||(he={}));function nn(){}function Yr(e,t){return i.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Vr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const We=Object.freeze({x:0,y:0});function so(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ao(e,t){const n=tn(e);if(!n)return"0 0";const s={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return s.x+"% "+s.y+"%"}function oo(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function lo(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function io(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function pr(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Qr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=pr(t,t.left,t.top),o=[];for(const l of s){const{id:c}=l,d=n.get(c);if(d){const u=so(pr(d),a);o.push({id:c,data:{droppableContainer:l,value:u}})}}return o.sort(oo)};function co(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=a-s,c=o-n;if(s<a&&n<o){const d=t.width*t.height,u=e.width*e.height,f=l*c,h=f/(d+u-f);return Number(h.toFixed(4))}return 0}const uo=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=[];for(const o of s){const{id:l}=o,c=n.get(l);if(c){const d=co(c,t);d>0&&a.push({id:l,data:{droppableContainer:o,value:d}})}}return a.sort(lo)};function fo(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Gr(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:We}function ho(e){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((l,c)=>({...l,top:l.top+e*c.y,bottom:l.bottom+e*c.y,left:l.left+e*c.x,right:l.right+e*c.x}),{...n})}}const mo=ho(1);function Zr(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function xo(e,t,n){const s=Zr(t);if(!s)return e;const{scaleX:a,scaleY:o,x:l,y:c}=s,d=e.left-l-(1-a)*parseFloat(n),u=e.top-c-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),f=a?e.width/a:e.width,h=o?e.height/o:e.height;return{width:f,height:h,top:u,right:d+f,bottom:u+h,left:d}}const po={ignoreTransform:!1};function wt(e,t){t===void 0&&(t=po);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=Ne(e).getComputedStyle(e);u&&(n=xo(n,u,f))}const{top:s,left:a,width:o,height:l,bottom:c,right:d}=n;return{top:s,left:a,width:o,height:l,bottom:c,right:d}}function gr(e){return wt(e,{ignoreTransform:!0})}function go(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function bo(e,t){return t===void 0&&(t=Ne(e).getComputedStyle(e)),t.position==="fixed"}function vo(e,t){t===void 0&&(t=Ne(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=t[a];return typeof o=="string"?n.test(o):!1})}function Fn(e,t){const n=[];function s(a){if(t!=null&&n.length>=t||!a)return n;if(Un(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Pt(a)||Jr(a)||n.includes(a))return n;const o=Ne(e).getComputedStyle(a);return a!==e&&vo(a,o)&&n.push(a),bo(a,o)?n:s(a.parentNode)}return e?s(e):n}function es(e){const[t]=Fn(e,1);return t??null}function vn(e){return!ln||!e?null:vt(e)?e:$n(e)?Un(e)||e===yt(e).scrollingElement?window:Pt(e)?e:null:null}function ts(e){return vt(e)?e.scrollX:e.scrollLeft}function ns(e){return vt(e)?e.scrollY:e.scrollTop}function Rn(e){return{x:ts(e),y:ns(e)}}var ge;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ge||(ge={}));function rs(e){return!ln||!e?!1:e===document.scrollingElement}function ss(e){const t={x:0,y:0},n=rs(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=s.y,c=e.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:l,isRight:c,maxScroll:s,minScroll:t}}const yo={x:.2,y:.2};function wo(e,t,n,s,a){let{top:o,left:l,right:c,bottom:d}=n;s===void 0&&(s=10),a===void 0&&(a=yo);const{isTop:u,isBottom:f,isLeft:h,isRight:x}=ss(e),g={x:0,y:0},C={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!u&&o<=t.top+b.height?(g.y=ge.Backward,C.y=s*Math.abs((t.top+b.height-o)/b.height)):!f&&d>=t.bottom-b.height&&(g.y=ge.Forward,C.y=s*Math.abs((t.bottom-b.height-d)/b.height)),!x&&c>=t.right-b.width?(g.x=ge.Forward,C.x=s*Math.abs((t.right-b.width-c)/b.width)):!h&&l<=t.left+b.width&&(g.x=ge.Backward,C.x=s*Math.abs((t.left+b.width-l)/b.width)),{direction:g,speed:C}}function jo(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:s,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:a,width:e.clientWidth,height:e.clientHeight}}function as(e){return e.reduce((t,n)=>gt(t,Rn(n)),We)}function No(e){return e.reduce((t,n)=>t+ts(n),0)}function Co(e){return e.reduce((t,n)=>t+ns(n),0)}function os(e,t){if(t===void 0&&(t=wt),!e)return;const{top:n,left:s,bottom:a,right:o}=t(e);es(e)&&(a<=0||o<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const So=[["x",["left","right"],No],["y",["top","bottom"],Co]];class zn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Fn(n),a=as(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,c]of So)for(const d of l)Object.defineProperty(this,d,{get:()=>{const u=c(s),f=a[o]-u;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Rt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var a;(a=this.target)==null||a.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function ko(e){const{EventTarget:t}=Ne(e);return e instanceof t?e:yt(e)}function yn(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var Le;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Le||(Le={}));function br(e){e.preventDefault()}function Eo(e){e.stopPropagation()}var V;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(V||(V={}));const ls={start:[V.Space,V.Enter],cancel:[V.Esc],end:[V.Space,V.Enter,V.Tab]},Do=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case V.Right:return{...n,x:n.x+25};case V.Left:return{...n,x:n.x-25};case V.Down:return{...n,y:n.y+25};case V.Up:return{...n,y:n.y-25}}};class is{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Rt(yt(n)),this.windowListeners=new Rt(Ne(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Le.Resize,this.handleCancel),this.windowListeners.add(Le.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Le.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&os(s),n(We)}handleKeyDown(t){if(dn(t)){const{active:n,context:s,options:a}=this.props,{keyboardCodes:o=ls,coordinateGetter:l=Do,scrollBehavior:c="smooth"}=a,{code:d}=t;if(o.end.includes(d)){this.handleEnd(t);return}if(o.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:u}=s.current,f=u?{x:u.left,y:u.top}:We;this.referenceCoordinates||(this.referenceCoordinates=f);const h=l(t,{active:n,context:s.current,currentCoordinates:f});if(h){const x=en(h,f),g={x:0,y:0},{scrollableAncestors:C}=s.current;for(const b of C){const p=t.code,{isTop:N,isRight:S,isLeft:j,isBottom:R,maxScroll:I,minScroll:A}=ss(b),L=jo(b),y={x:Math.min(p===V.Right?L.right-L.width/2:L.right,Math.max(p===V.Right?L.left:L.left+L.width/2,h.x)),y:Math.min(p===V.Down?L.bottom-L.height/2:L.bottom,Math.max(p===V.Down?L.top:L.top+L.height/2,h.y))},E=p===V.Right&&!S||p===V.Left&&!j,D=p===V.Down&&!R||p===V.Up&&!N;if(E&&y.x!==h.x){const M=b.scrollLeft+x.x,X=p===V.Right&&M<=I.x||p===V.Left&&M>=A.x;if(X&&!x.y){b.scrollTo({left:M,behavior:c});return}X?g.x=b.scrollLeft-M:g.x=p===V.Right?b.scrollLeft-I.x:b.scrollLeft-A.x,g.x&&b.scrollBy({left:-g.x,behavior:c});break}else if(D&&y.y!==h.y){const M=b.scrollTop+x.y,X=p===V.Down&&M<=I.y||p===V.Up&&M>=A.y;if(X&&!x.x){b.scrollTo({top:M,behavior:c});return}X?g.y=b.scrollTop-M:g.y=p===V.Down?b.scrollTop-I.y:b.scrollTop-A.y,g.y&&b.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(t,gt(en(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}is.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=ls,onActivation:a}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(s.start.includes(l)){const c=o.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function vr(e){return!!(e&&"distance"in e)}function yr(e){return!!(e&&"delay"in e)}class Hn{constructor(t,n,s){var a;s===void 0&&(s=ko(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=yt(l),this.documentListeners=new Rt(this.document),this.listeners=new Rt(s),this.windowListeners=new Rt(Ne(l)),this.initialCoordinates=(a=tn(o))!=null?a:We,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Le.Resize,this.handleCancel),this.windowListeners.add(Le.DragStart,br),this.windowListeners.add(Le.VisibilityChange,this.handleCancel),this.windowListeners.add(Le.ContextMenu,br),this.documentListeners.add(Le.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(yr(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(vr(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:a}=this.props;a(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Le.Click,Eo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Le.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:l,options:{activationConstraint:c}}=o;if(!a)return;const d=(n=tn(t))!=null?n:We,u=en(a,d);if(!s&&c){if(vr(c)){if(c.tolerance!=null&&yn(u,c.tolerance))return this.handleCancel();if(yn(u,c.distance))return this.handleStart()}if(yr(c)&&yn(u,c.tolerance))return this.handleCancel();this.handlePending(c,u);return}t.cancelable&&t.preventDefault(),l(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===V.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ro={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class un extends Hn{constructor(t){const{event:n}=t,s=yt(n.target);super(t,Ro,s)}}un.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const Oo={move:{name:"mousemove"},end:{name:"mouseup"}};var On;(function(e){e[e.RightClick=2]="RightClick"})(On||(On={}));class Io extends Hn{constructor(t){super(t,Oo,yt(t.event.target))}}Io.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===On.RightClick?!1:(s==null||s({event:n}),!0)}}];const wn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Mo extends Hn{constructor(t){super(t,wn)}static setup(){return window.addEventListener(wn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(wn.move.name,t)};function t(){}}}Mo.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:a}=n;return a.length>1?!1:(s==null||s({event:n}),!0)}}];var Ot;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ot||(Ot={}));var rn;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(rn||(rn={}));function To(e){let{acceleration:t,activator:n=Ot.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:l=5,order:c=rn.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:f,delta:h,threshold:x}=e;const g=_o({delta:h,disabled:!o}),[C,b]=Wa(),p=i.useRef({x:0,y:0}),N=i.useRef({x:0,y:0}),S=i.useMemo(()=>{switch(n){case Ot.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Ot.DraggableRect:return a}},[n,a,d]),j=i.useRef(null),R=i.useCallback(()=>{const A=j.current;if(!A)return;const L=p.current.x*N.current.x,y=p.current.y*N.current.y;A.scrollBy(L,y)},[]),I=i.useMemo(()=>c===rn.TreeOrder?[...u].reverse():u,[c,u]);i.useEffect(()=>{if(!o||!u.length||!S){b();return}for(const A of I){if((s==null?void 0:s(A))===!1)continue;const L=u.indexOf(A),y=f[L];if(!y)continue;const{direction:E,speed:D}=wo(A,y,S,t,x);for(const M of["x","y"])g[M][E[M]]||(D[M]=0,E[M]=0);if(D.x>0||D.y>0){b(),j.current=A,C(R,l),p.current=D,N.current=E;return}}p.current={x:0,y:0},N.current={x:0,y:0},b()},[t,R,s,b,o,l,JSON.stringify(S),JSON.stringify(g),C,u,I,f,JSON.stringify(x)])}const Lo={x:{[ge.Backward]:!1,[ge.Forward]:!1},y:{[ge.Backward]:!1,[ge.Forward]:!1}};function _o(e){let{delta:t,disabled:n}=e;const s=Zt(t);return Bt(a=>{if(n||!s||!a)return Lo;const o={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[ge.Backward]:a.x[ge.Backward]||o.x===-1,[ge.Forward]:a.x[ge.Forward]||o.x===1},y:{[ge.Backward]:a.y[ge.Backward]||o.y===-1,[ge.Forward]:a.y[ge.Forward]||o.y===1}}},[n,t,s])}function Ao(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return Bt(a=>{var o;return t==null?null:(o=s??a)!=null?o:null},[s,t])}function Po(e,t){return i.useMemo(()=>e.reduce((n,s)=>{const{sensor:a}=s,o=a.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,s)}));return[...n,...o]},[]),[e,t])}var _t;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(_t||(_t={}));var In;(function(e){e.Optimized="optimized"})(In||(In={}));const wr=new Map;function Bo(e,t){let{dragging:n,dependencies:s,config:a}=t;const[o,l]=i.useState(null),{frequency:c,measure:d,strategy:u}=a,f=i.useRef(e),h=p(),x=Lt(h),g=i.useCallback(function(N){N===void 0&&(N=[]),!x.current&&l(S=>S===null?N:S.concat(N.filter(j=>!S.includes(j))))},[x]),C=i.useRef(null),b=Bt(N=>{if(h&&!n)return wr;if(!N||N===wr||f.current!==e||o!=null){const S=new Map;for(let j of e){if(!j)continue;if(o&&o.length>0&&!o.includes(j.id)&&j.rect.current){S.set(j.id,j.rect.current);continue}const R=j.node.current,I=R?new zn(d(R),R):null;j.rect.current=I,I&&S.set(j.id,I)}return S}return N},[e,o,n,h,d]);return i.useEffect(()=>{f.current=e},[e]),i.useEffect(()=>{h||g()},[n,h]),i.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),i.useEffect(()=>{h||typeof c!="number"||C.current!==null||(C.current=setTimeout(()=>{g(),C.current=null},c))},[c,h,g,...s]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:o!=null};function p(){switch(u){case _t.Always:return!1;case _t.BeforeDragging:return n;default:return!n}}}function qn(e,t){return Bt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function $o(e,t){return qn(e,t)}function Uo(e){let{callback:t,disabled:n}=e;const s=cn(t),a=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,n]);return i.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function fn(e){let{callback:t,disabled:n}=e;const s=cn(t),a=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[n]);return i.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Fo(e){return new zn(wt(e),e)}function jr(e,t,n){t===void 0&&(t=Fo);const[s,a]=i.useState(null);function o(){a(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??n)!=null?u:null}const f=t(e);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const l=Uo({callback(d){if(e)for(const u of d){const{type:f,target:h}=u;if(f==="childList"&&h instanceof HTMLElement&&h.contains(e)){o();break}}}}),c=fn({callback:o});return qe(()=>{o(),e?(c==null||c.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),l==null||l.disconnect())},[e]),s}function zo(e){const t=qn(e);return Gr(e,t)}const Nr=[];function Ho(e){const t=i.useRef(e),n=Bt(s=>e?s&&s!==Nr&&e&&t.current&&e.parentNode===t.current.parentNode?s:Fn(e):Nr,[e]);return i.useEffect(()=>{t.current=e},[e]),n}function qo(e){const[t,n]=i.useState(null),s=i.useRef(e),a=i.useCallback(o=>{const l=vn(o.target);l&&n(c=>c?(c.set(l,Rn(l)),new Map(c)):null)},[]);return i.useEffect(()=>{const o=s.current;if(e!==o){l(o);const c=e.map(d=>{const u=vn(d);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,Rn(u)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),s.current=e}return()=>{l(e),l(o)};function l(c){c.forEach(d=>{const u=vn(d);u==null||u.removeEventListener("scroll",a)})}},[a,e]),i.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>gt(o,l),We):as(e):We,[e,t])}function Cr(e,t){t===void 0&&(t=[]);const n=i.useRef(null);return i.useEffect(()=>{n.current=null},t),i.useEffect(()=>{const s=e!==We;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?en(e,n.current):We}function Wo(e){i.useEffect(()=>{if(!ln)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Jo(e,t){return i.useMemo(()=>e.reduce((n,s)=>{let{eventName:a,handler:o}=s;return n[a]=l=>{o(l,t)},n},{}),[e,t])}function cs(e){return i.useMemo(()=>e?go(e):null,[e])}const Sr=[];function Ko(e,t){t===void 0&&(t=wt);const[n]=e,s=cs(n?Ne(n):null),[a,o]=i.useState(Sr);function l(){o(()=>e.length?e.map(d=>rs(d)?s:new zn(t(d),d)):Sr)}const c=fn({callback:l});return qe(()=>{c==null||c.disconnect(),l(),e.forEach(d=>c==null?void 0:c.observe(d))},[e]),a}function ds(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Pt(t)?t:e}function Xo(e){let{measure:t}=e;const[n,s]=i.useState(null),a=i.useCallback(u=>{for(const{target:f}of u)if(Pt(f)){s(h=>{const x=t(f);return h?{...h,width:x.width,height:x.height}:x});break}},[t]),o=fn({callback:a}),l=i.useCallback(u=>{const f=ds(u);o==null||o.disconnect(),f&&(o==null||o.observe(f)),s(f?t(f):null)},[t,o]),[c,d]=Gt(l);return i.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const Yo=[{sensor:un,options:{}},{sensor:is,options:{}}],Vo={current:{}},Yt={draggable:{measure:gr},droppable:{measure:gr,strategy:_t.WhileDragging,frequency:In.Optimized},dragOverlay:{measure:wt}};class It extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const Qo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new It,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:nn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Yt,measureDroppableContainers:nn,windowRect:null,measuringScheduled:!1},us={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:nn,draggableNodes:new Map,over:null,measureDroppableContainers:nn},Ut=i.createContext(us),fs=i.createContext(Qo);function Go(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new It}}}function Zo(e,t){switch(t.type){case he.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case he.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case he.DragEnd:case he.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case he.RegisterDroppable:{const{element:n}=t,{id:s}=n,a=new It(e.droppable.containers);return a.set(s,n),{...e,droppable:{...e.droppable,containers:a}}}case he.SetDroppableDisabled:{const{id:n,key:s,disabled:a}=t,o=e.droppable.containers.get(n);if(!o||s!==o.key)return e;const l=new It(e.droppable.containers);return l.set(n,{...o,disabled:a}),{...e,droppable:{...e.droppable,containers:l}}}case he.UnregisterDroppable:{const{id:n,key:s}=t,a=e.droppable.containers.get(n);if(!a||s!==a.key)return e;const o=new It(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function el(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:a}=i.useContext(Ut),o=Zt(s),l=Zt(n==null?void 0:n.id);return i.useEffect(()=>{if(!t&&!s&&o&&l!=null){if(!dn(o)||document.activeElement===o.target)return;const c=a.get(l);if(!c)return;const{activatorNode:d,node:u}=c;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[d.current,u.current]){if(!f)continue;const h=Xa(f);if(h){h.focus();break}}})}},[s,t,a,l,o]),null}function hs(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((a,o)=>o({transform:a,...s}),n):n}function tl(e){return i.useMemo(()=>({draggable:{...Yt.draggable,...e==null?void 0:e.draggable},droppable:{...Yt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Yt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function nl(e){let{activeNode:t,measure:n,initialRect:s,config:a=!0}=e;const o=i.useRef(!1),{x:l,y:c}=typeof a=="boolean"?{x:a,y:a}:a;qe(()=>{if(!l&&!c||!t){o.current=!1;return}if(o.current||!s)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),h=Gr(f,s);if(l||(h.x=0),c||(h.y=0),o.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const x=es(u);x&&x.scrollBy({top:h.y,left:h.x})}},[t,l,c,s,n])}const hn=i.createContext({...We,scaleX:1,scaleY:1});var rt;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(rt||(rt={}));const ms=i.memo(function(t){var n,s,a,o;let{id:l,accessibility:c,autoScroll:d=!0,children:u,sensors:f=Yo,collisionDetection:h=uo,measuring:x,modifiers:g,...C}=t;const b=i.useReducer(Zo,void 0,Go),[p,N]=b,[S,j]=eo(),[R,I]=i.useState(rt.Uninitialized),A=R===rt.Initialized,{draggable:{active:L,nodes:y,translate:E},droppable:{containers:D}}=p,M=L!=null?y.get(L):null,X=i.useRef({initial:null,translated:null}),F=i.useMemo(()=>{var pe;return L!=null?{id:L,data:(pe=M==null?void 0:M.data)!=null?pe:Vo,rect:X}:null},[L,M]),z=i.useRef(null),[_,$]=i.useState(null),[T,me]=i.useState(null),ae=Lt(C,Object.values(C)),H=$t("DndDescribedBy",l),Ce=i.useMemo(()=>D.getEnabled(),[D]),Z=tl(x),{droppableRects:G,measureDroppableContainers:se,measuringScheduled:P}=Bo(Ce,{dragging:A,dependencies:[E.x,E.y],config:Z.droppable}),J=Ao(y,L),ce=i.useMemo(()=>T?tn(T):null,[T]),te=qt(),U=$o(J,Z.draggable.measure);nl({activeNode:L!=null?y.get(L):null,config:te.layoutShiftCompensation,initialRect:U,measure:Z.draggable.measure});const O=jr(J,Z.draggable.measure,U),ne=jr(J?J.parentElement:null),ee=i.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:y,draggingNode:null,draggingNodeRect:null,droppableContainers:D,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),oe=D.getNodeFor((n=ee.current.over)==null?void 0:n.id),q=Xo({measure:Z.dragOverlay.measure}),tt=(s=q.nodeRef.current)!=null?s:J,Re=A?(a=q.rect)!=null?a:O:null,Ft=!!(q.nodeRef.current&&q.rect),nt=zo(Ft?null:O),jt=cs(tt?Ne(tt):null),Oe=Ho(A?oe??J:null),Ye=Ko(Oe),Ve=hs(g,{transform:{x:E.x-nt.x,y:E.y-nt.y,scaleX:1,scaleY:1},activatorEvent:T,active:F,activeNodeRect:O,containerNodeRect:ne,draggingNodeRect:Re,over:ee.current.over,overlayNodeRect:q.rect,scrollableAncestors:Oe,scrollableAncestorRects:Ye,windowRect:jt}),Qe=ce?gt(ce,E):null,xe=qo(Oe),zt=Cr(xe),it=Cr(xe,[O]),_e=gt(Ve,zt),Ie=Re?mo(Re,Ve):null,Je=F&&Ie?h({active:F,collisionRect:Ie,droppableRects:G,droppableContainers:Ce,pointerCoordinates:Qe}):null,Nt=io(Je,"id"),[Se,Ae]=i.useState(null),ct=Ft?Ve:gt(Ve,it),Ke=fo(ct,(o=Se==null?void 0:Se.rect)!=null?o:null,O),Ct=i.useRef(null),Ge=i.useCallback((pe,we)=>{let{sensor:ye,options:Pe}=we;if(z.current==null)return;const ke=y.get(z.current);if(!ke)return;const je=pe.nativeEvent,ue=new ye({active:z.current,activeNode:ke,event:je,options:Pe,context:ee,onAbort(fe){if(!y.get(fe))return;const{onDragAbort:Te}=ae.current,Be={id:fe};Te==null||Te(Be),S({type:"onDragAbort",event:Be})},onPending(fe,De,Te,Be){if(!y.get(fe))return;const{onDragPending:ut}=ae.current,Xe={id:fe,constraint:De,initialCoordinates:Te,offset:Be};ut==null||ut(Xe),S({type:"onDragPending",event:Xe})},onStart(fe){const De=z.current;if(De==null)return;const Te=y.get(De);if(!Te)return;const{onDragStart:Be}=ae.current,dt={activatorEvent:je,active:{id:De,data:Te.data,rect:X}};pt.unstable_batchedUpdates(()=>{Be==null||Be(dt),I(rt.Initializing),N({type:he.DragStart,initialCoordinates:fe,active:De}),S({type:"onDragStart",event:dt}),$(Ct.current),me(je)})},onMove(fe){N({type:he.DragMove,coordinates:fe})},onEnd:Ee(he.DragEnd),onCancel:Ee(he.DragCancel)});Ct.current=ue;function Ee(fe){return async function(){const{active:Te,collisions:Be,over:dt,scrollAdjustedTranslate:ut}=ee.current;let Xe=null;if(Te&&ut){const{cancelDrop:ft}=ae.current;Xe={activatorEvent:je,active:Te,collisions:Be,delta:ut,over:dt},fe===he.DragEnd&&typeof ft=="function"&&await Promise.resolve(ft(Xe))&&(fe=he.DragCancel)}z.current=null,pt.unstable_batchedUpdates(()=>{N({type:fe}),I(rt.Uninitialized),Ae(null),$(null),me(null),Ct.current=null;const ft=fe===he.DragEnd?"onDragEnd":"onDragCancel";if(Xe){const kt=ae.current[ft];kt==null||kt(Xe),S({type:ft,event:Xe})}})}}},[y]),Me=i.useCallback((pe,we)=>(ye,Pe)=>{const ke=ye.nativeEvent,je=y.get(Pe);if(z.current!==null||!je||ke.dndKit||ke.defaultPrevented)return;const ue={active:je};pe(ye,we.options,ue)===!0&&(ke.dndKit={capturedBy:we.sensor},z.current=Pe,Ge(ye,we))},[y,Ge]),be=Po(f,Me);Wo(f),qe(()=>{O&&R===rt.Initializing&&I(rt.Initialized)},[O,R]),i.useEffect(()=>{const{onDragMove:pe}=ae.current,{active:we,activatorEvent:ye,collisions:Pe,over:ke}=ee.current;if(!we||!ye)return;const je={active:we,activatorEvent:ye,collisions:Pe,delta:{x:_e.x,y:_e.y},over:ke};pt.unstable_batchedUpdates(()=>{pe==null||pe(je),S({type:"onDragMove",event:je})})},[_e.x,_e.y]),i.useEffect(()=>{const{active:pe,activatorEvent:we,collisions:ye,droppableContainers:Pe,scrollAdjustedTranslate:ke}=ee.current;if(!pe||z.current==null||!we||!ke)return;const{onDragOver:je}=ae.current,ue=Pe.get(Nt),Ee=ue&&ue.rect.current?{id:ue.id,rect:ue.rect.current,data:ue.data,disabled:ue.disabled}:null,fe={active:pe,activatorEvent:we,collisions:ye,delta:{x:ke.x,y:ke.y},over:Ee};pt.unstable_batchedUpdates(()=>{Ae(Ee),je==null||je(fe),S({type:"onDragOver",event:fe})})},[Nt]),qe(()=>{ee.current={activatorEvent:T,active:F,activeNode:J,collisionRect:Ie,collisions:Je,droppableRects:G,draggableNodes:y,draggingNode:tt,draggingNodeRect:Re,droppableContainers:D,over:Se,scrollableAncestors:Oe,scrollAdjustedTranslate:_e},X.current={initial:Re,translated:Ie}},[F,J,Je,Ie,y,tt,Re,G,D,Se,Oe,_e]),To({...te,delta:E,draggingRect:Ie,pointerCoordinates:Qe,scrollableAncestors:Oe,scrollableAncestorRects:Ye});const St=i.useMemo(()=>({active:F,activeNode:J,activeNodeRect:O,activatorEvent:T,collisions:Je,containerNodeRect:ne,dragOverlay:q,draggableNodes:y,droppableContainers:D,droppableRects:G,over:Se,measureDroppableContainers:se,scrollableAncestors:Oe,scrollableAncestorRects:Ye,measuringConfiguration:Z,measuringScheduled:P,windowRect:jt}),[F,J,O,T,Je,ne,q,y,D,G,Se,se,Oe,Ye,Z,P,jt]),Ht=i.useMemo(()=>({activatorEvent:T,activators:be,active:F,activeNodeRect:O,ariaDescribedById:{draggable:H},dispatch:N,draggableNodes:y,over:Se,measureDroppableContainers:se}),[T,be,F,O,N,H,y,Se,se]);return Q.createElement(Xr.Provider,{value:j},Q.createElement(Ut.Provider,{value:Ht},Q.createElement(fs.Provider,{value:St},Q.createElement(hn.Provider,{value:Ke},u)),Q.createElement(el,{disabled:(c==null?void 0:c.restoreFocus)===!1})),Q.createElement(ro,{...c,hiddenTextDescribedById:H}));function qt(){const pe=(_==null?void 0:_.autoScrollEnabled)===!1,we=typeof d=="object"?d.enabled===!1:d===!1,ye=A&&!pe&&!we;return typeof d=="object"?{...d,enabled:ye}:{enabled:ye}}}),rl=i.createContext(null),kr="button",sl="Draggable";function al(e){let{id:t,data:n,disabled:s=!1,attributes:a}=e;const o=$t(sl),{activators:l,activatorEvent:c,active:d,activeNodeRect:u,ariaDescribedById:f,draggableNodes:h,over:x}=i.useContext(Ut),{role:g=kr,roleDescription:C="draggable",tabIndex:b=0}=a??{},p=(d==null?void 0:d.id)===t,N=i.useContext(p?hn:rl),[S,j]=Gt(),[R,I]=Gt(),A=Jo(l,t),L=Lt(n);qe(()=>(h.set(t,{id:t,key:o,node:S,activatorNode:R,data:L}),()=>{const E=h.get(t);E&&E.key===o&&h.delete(t)}),[h,t]);const y=i.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":s,"aria-pressed":p&&g===kr?!0:void 0,"aria-roledescription":C,"aria-describedby":f.draggable}),[s,g,b,p,C,f.draggable]);return{active:d,activatorEvent:c,activeNodeRect:u,attributes:y,isDragging:p,listeners:s?void 0:A,node:S,over:x,setNodeRef:j,setActivatorNodeRef:I,transform:N}}function xs(){return i.useContext(fs)}const ol="Droppable",ll={timeout:25};function il(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:a}=e;const o=$t(ol),{active:l,dispatch:c,over:d,measureDroppableContainers:u}=i.useContext(Ut),f=i.useRef({disabled:n}),h=i.useRef(!1),x=i.useRef(null),g=i.useRef(null),{disabled:C,updateMeasurementsFor:b,timeout:p}={...ll,...a},N=Lt(b??s),S=i.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(N.current)?N.current:[N.current]),g.current=null},p)},[p]),j=fn({callback:S,disabled:C||!l}),R=i.useCallback((y,E)=>{j&&(E&&(j.unobserve(E),h.current=!1),y&&j.observe(y))},[j]),[I,A]=Gt(R),L=Lt(t);return i.useEffect(()=>{!j||!I.current||(j.disconnect(),h.current=!1,j.observe(I.current))},[I,j]),i.useEffect(()=>(c({type:he.RegisterDroppable,element:{id:s,key:o,disabled:n,node:I,rect:x,data:L}}),()=>c({type:he.UnregisterDroppable,key:o,id:s})),[s]),i.useEffect(()=>{n!==f.current.disabled&&(c({type:he.SetDroppableDisabled,id:s,key:o,disabled:n}),f.current.disabled=n)},[s,o,n,c]),{active:l,rect:x,isOver:(d==null?void 0:d.id)===s,node:I,over:d,setNodeRef:A}}function cl(e){let{animation:t,children:n}=e;const[s,a]=i.useState(null),[o,l]=i.useState(null),c=Zt(n);return!n&&!s&&c&&a(c),qe(()=>{if(!o)return;const d=s==null?void 0:s.key,u=s==null?void 0:s.props.id;if(d==null||u==null){a(null);return}Promise.resolve(t(u,o)).then(()=>{a(null)})},[t,s,o]),Q.createElement(Q.Fragment,null,n,s?i.cloneElement(s,{ref:l}):null)}const dl={x:0,y:0,scaleX:1,scaleY:1};function ul(e){let{children:t}=e;return Q.createElement(Ut.Provider,{value:us},Q.createElement(hn.Provider,{value:dl},t))}const fl={position:"fixed",touchAction:"none"},hl=e=>dn(e)?"transform 250ms ease":void 0,ml=i.forwardRef((e,t)=>{let{as:n,activatorEvent:s,adjustScale:a,children:o,className:l,rect:c,style:d,transform:u,transition:f=hl}=e;if(!c)return null;const h=a?u:{...u,scaleX:1,scaleY:1},x={...fl,width:c.width,height:c.height,top:c.top,left:c.left,transform:et.Transform.toString(h),transformOrigin:a&&s?ao(s,c):void 0,transition:typeof f=="function"?f(s):f,...d};return Q.createElement(n,{className:l,style:x,ref:t},o)}),xl=e=>t=>{let{active:n,dragOverlay:s}=t;const a={},{styles:o,className:l}=e;if(o!=null&&o.active)for(const[c,d]of Object.entries(o.active))d!==void 0&&(a[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,d));if(o!=null&&o.dragOverlay)for(const[c,d]of Object.entries(o.dragOverlay))d!==void 0&&s.node.style.setProperty(c,d);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&s.node.classList.add(l.dragOverlay),function(){for(const[d,u]of Object.entries(a))n.node.style.setProperty(d,u);l!=null&&l.active&&n.node.classList.remove(l.active)}},pl=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:et.Transform.toString(t)},{transform:et.Transform.toString(n)}]},gl={duration:250,easing:"ease",keyframes:pl,sideEffects:xl({styles:{active:{opacity:"0"}}})};function bl(e){let{config:t,draggableNodes:n,droppableContainers:s,measuringConfiguration:a}=e;return cn((o,l)=>{if(t===null)return;const c=n.get(o);if(!c)return;const d=c.node.current;if(!d)return;const u=ds(l);if(!u)return;const{transform:f}=Ne(l).getComputedStyle(l),h=Zr(f);if(!h)return;const x=typeof t=="function"?t:vl(t);return os(d,a.draggable.measure),x({active:{id:o,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:l,rect:a.dragOverlay.measure(u)},droppableContainers:s,measuringConfiguration:a,transform:h})})}function vl(e){const{duration:t,easing:n,sideEffects:s,keyframes:a}={...gl,...e};return o=>{let{active:l,dragOverlay:c,transform:d,...u}=o;if(!t)return;const f={x:c.rect.left-l.rect.left,y:c.rect.top-l.rect.top},h={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/c.rect.height:1},x={x:d.x-f.x,y:d.y-f.y,...h},g=a({...u,active:l,dragOverlay:c,transform:{initial:d,final:x}}),[C]=g,b=g[g.length-1];if(JSON.stringify(C)===JSON.stringify(b))return;const p=s==null?void 0:s({active:l,dragOverlay:c,...u}),N=c.node.animate(g,{duration:t,easing:n,fill:"forwards"});return new Promise(S=>{N.onfinish=()=>{p==null||p(),S()}})}}let Er=0;function yl(e){return i.useMemo(()=>{if(e!=null)return Er++,Er},[e])}const wl=Q.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:s,style:a,transition:o,modifiers:l,wrapperElement:c="div",className:d,zIndex:u=999}=e;const{activatorEvent:f,active:h,activeNodeRect:x,containerNodeRect:g,draggableNodes:C,droppableContainers:b,dragOverlay:p,over:N,measuringConfiguration:S,scrollableAncestors:j,scrollableAncestorRects:R,windowRect:I}=xs(),A=i.useContext(hn),L=yl(h==null?void 0:h.id),y=hs(l,{activatorEvent:f,active:h,activeNodeRect:x,containerNodeRect:g,draggingNodeRect:p.rect,over:N,overlayNodeRect:p.rect,scrollableAncestors:j,scrollableAncestorRects:R,transform:A,windowRect:I}),E=qn(x),D=bl({config:s,draggableNodes:C,droppableContainers:b,measuringConfiguration:S}),M=E?p.setRef:void 0;return Q.createElement(ul,null,Q.createElement(cl,{animation:D},h&&L?Q.createElement(ml,{key:L,id:h.id,ref:M,as:c,activatorEvent:f,adjustScale:t,className:d,transition:o,rect:E,style:{zIndex:u,...a},transform:y},n):null))});function mn(e,t,n){const s=e.slice();return s.splice(n<0?s.length+n:n,0,s.splice(t,1)[0]),s}function jl(e,t){return e.reduce((n,s,a)=>{const o=t.get(s);return o&&(n[a]=o),n},Array(e.length))}function Jt(e){return e!==null&&e>=0}function Nl(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Cl(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Wn=e=>{let{rects:t,activeIndex:n,overIndex:s,index:a}=e;const o=mn(t,s,n),l=t[a],c=o[a];return!c||!l?null:{x:c.left-l.left,y:c.top-l.top,scaleX:c.width/l.width,scaleY:c.height/l.height}},Kt={scaleX:1,scaleY:1},Sl=e=>{var t;let{activeIndex:n,activeNodeRect:s,index:a,rects:o,overIndex:l}=e;const c=(t=o[n])!=null?t:s;if(!c)return null;if(a===n){const u=o[l];return u?{x:0,y:n<l?u.top+u.height-(c.top+c.height):u.top-c.top,...Kt}:null}const d=kl(o,a,n);return a>n&&a<=l?{x:0,y:-c.height-d,...Kt}:a<n&&a>=l?{x:0,y:c.height+d,...Kt}:{x:0,y:0,...Kt}};function kl(e,t,n){const s=e[t],a=e[t-1],o=e[t+1];return s?n<t?a?s.top-(a.top+a.height):o?o.top-(s.top+s.height):0:o?o.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const ps="Sortable",gs=Q.createContext({activeIndex:-1,containerId:ps,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Wn,disabled:{draggable:!1,droppable:!1}});function bs(e){let{children:t,id:n,items:s,strategy:a=Wn,disabled:o=!1}=e;const{active:l,dragOverlay:c,droppableRects:d,over:u,measureDroppableContainers:f}=xs(),h=$t(ps,n),x=c.rect!==null,g=i.useMemo(()=>s.map(A=>typeof A=="object"&&"id"in A?A.id:A),[s]),C=l!=null,b=l?g.indexOf(l.id):-1,p=u?g.indexOf(u.id):-1,N=i.useRef(g),S=!Nl(g,N.current),j=p!==-1&&b===-1||S,R=Cl(o);qe(()=>{S&&C&&f(g)},[S,g,C,f]),i.useEffect(()=>{N.current=g},[g]);const I=i.useMemo(()=>({activeIndex:b,containerId:h,disabled:R,disableTransforms:j,items:g,overIndex:p,useDragOverlay:x,sortedRects:jl(g,d),strategy:a}),[b,h,R.draggable,R.droppable,j,g,p,d,x,a]);return Q.createElement(gs.Provider,{value:I},t)}const El=e=>{let{id:t,items:n,activeIndex:s,overIndex:a}=e;return mn(n,s,a).indexOf(t)},Dl=e=>{let{containerId:t,isSorting:n,wasDragging:s,index:a,items:o,newIndex:l,previousItems:c,previousContainerId:d,transition:u}=e;return!u||!s||c!==o&&a===l?!1:n?!0:l!==a&&t===d},Rl={duration:200,easing:"ease"},vs="transform",Ol=et.Transition.toString({property:vs,duration:0,easing:"linear"}),Il={roleDescription:"sortable"};function Ml(e){let{disabled:t,index:n,node:s,rect:a}=e;const[o,l]=i.useState(null),c=i.useRef(n);return qe(()=>{if(!t&&n!==c.current&&s.current){const d=a.current;if(d){const u=wt(s.current,{ignoreTransform:!0}),f={x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height};(f.x||f.y)&&l(f)}}n!==c.current&&(c.current=n)},[t,n,s,a]),i.useEffect(()=>{o&&l(null)},[o]),o}function ys(e){let{animateLayoutChanges:t=Dl,attributes:n,disabled:s,data:a,getNewIndex:o=El,id:l,strategy:c,resizeObserverConfig:d,transition:u=Rl}=e;const{items:f,containerId:h,activeIndex:x,disabled:g,disableTransforms:C,sortedRects:b,overIndex:p,useDragOverlay:N,strategy:S}=i.useContext(gs),j=Tl(s,g),R=f.indexOf(l),I=i.useMemo(()=>({sortable:{containerId:h,index:R,items:f},...a}),[h,a,R,f]),A=i.useMemo(()=>f.slice(f.indexOf(l)),[f,l]),{rect:L,node:y,isOver:E,setNodeRef:D}=il({id:l,data:I,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...d}}),{active:M,activatorEvent:X,activeNodeRect:F,attributes:z,setNodeRef:_,listeners:$,isDragging:T,over:me,setActivatorNodeRef:ae,transform:H}=al({id:l,data:I,attributes:{...Il,...n},disabled:j.draggable}),Ce=qa(D,_),Z=!!M,G=Z&&!C&&Jt(x)&&Jt(p),se=!N&&T,P=se&&G?H:null,ce=G?P??(c??S)({rects:b,activeNodeRect:F,activeIndex:x,overIndex:p,index:R}):null,te=Jt(x)&&Jt(p)?o({id:l,items:f,activeIndex:x,overIndex:p}):R,U=M==null?void 0:M.id,O=i.useRef({activeId:U,items:f,newIndex:te,containerId:h}),ne=f!==O.current.items,ee=t({active:M,containerId:h,isDragging:T,isSorting:Z,id:l,index:R,items:f,newIndex:O.current.newIndex,previousItems:O.current.items,previousContainerId:O.current.containerId,transition:u,wasDragging:O.current.activeId!=null}),oe=Ml({disabled:!ee,index:R,node:y,rect:L});return i.useEffect(()=>{Z&&O.current.newIndex!==te&&(O.current.newIndex=te),h!==O.current.containerId&&(O.current.containerId=h),f!==O.current.items&&(O.current.items=f)},[Z,te,h,f]),i.useEffect(()=>{if(U===O.current.activeId)return;if(U!=null&&O.current.activeId==null){O.current.activeId=U;return}const tt=setTimeout(()=>{O.current.activeId=U},50);return()=>clearTimeout(tt)},[U]),{active:M,activeIndex:x,attributes:z,data:I,rect:L,index:R,newIndex:te,items:f,isOver:E,isSorting:Z,isDragging:T,listeners:$,node:y,overIndex:p,over:me,setNodeRef:Ce,setActivatorNodeRef:ae,setDroppableNodeRef:D,setDraggableNodeRef:_,transform:oe??ce,transition:q()};function q(){if(oe||ne&&O.current.newIndex===R)return Ol;if(!(se&&!dn(X)||!u)&&(Z||ee))return et.Transition.toString({...u,property:vs})}}function Tl(e,t){var n,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}V.Down,V.Right,V.Up,V.Left;function Ue({children:e}){return r.jsx("label",{className:"block text-[10px] font-semibold uppercase text-text-muted tracking-wider mb-1.5",children:e})}function Fe({children:e,className:t=""}){return r.jsx("div",{className:`rounded-lg border border-white/10 bg-white/[0.02] p-3 ${t}`,children:e})}function Ll({open:e,onClose:t,onExportHtml:n,onImportFile:s}){const a=ht(),o=Y(a.locale),l=i.useRef(null),c=i.useRef(null);if(!e)return null;const d=f=>{var x;const h=(x=f.target.files)==null?void 0:x[0];h&&s&&s(h),f.target.value=""},u=f=>f?"bg-accent text-white shadow-[0_0_12px_rgba(129,140,248,0.35)]":"bg-white/5 text-text-secondary hover:bg-white/10 hover:text-white border border-white/5";return r.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:t,children:r.jsxs("div",{className:"bg-sidebar border border-white/10 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",role:"dialog","aria-labelledby":"settings-title",onClick:f=>f.stopPropagation(),children:[r.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-5 py-3 border-b border-white/10 bg-sidebar/95 backdrop-blur-md",children:[r.jsxs("h2",{id:"settings-title",className:"flex items-center gap-2 text-base font-semibold text-white",children:[r.jsx("span",{className:"material-symbols-outlined text-accent text-[20px]",children:"settings"}),o.settings]}),r.jsx("button",{type:"button",onClick:t,className:"p-1.5 rounded-lg text-text-muted hover:text-white hover:bg-white/10 transition","aria-label":o.close,children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"close"})})]}),r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Fe,{children:[r.jsx(Ue,{children:o.language}),r.jsxs("div",{className:"flex gap-1.5",children:[r.jsx("button",{type:"button",onClick:()=>a.setLocale("vi"),className:`flex-1 py-1.5 px-2.5 rounded-lg text-xs font-medium transition ${u(a.locale==="vi")}`,children:o.vietnamese}),r.jsx("button",{type:"button",onClick:()=>a.setLocale("en"),className:`flex-1 py-1.5 px-2.5 rounded-lg text-xs font-medium transition ${u(a.locale==="en")}`,children:o.english})]})]}),r.jsxs(Fe,{children:[r.jsx(Ue,{children:o.displayMode}),r.jsxs("div",{className:"flex gap-1.5",children:[r.jsxs("button",{type:"button",onClick:()=>a.setTheme("dark"),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-2.5 rounded-lg text-xs font-medium transition ${u(a.theme==="dark")}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"dark_mode"}),o.dark]}),r.jsxs("button",{type:"button",onClick:()=>a.setTheme("light"),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-2.5 rounded-lg text-xs font-medium transition ${u(a.theme==="light")}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"light_mode"}),o.light]})]})]}),r.jsxs(Fe,{children:[r.jsx(Ue,{children:"Supabase"}),r.jsx("p",{className:"text-[11px] text-text-muted break-all",title:Vt,children:Vt}),r.jsx("p",{className:"text-[10px] text-text-muted mt-1",children:o.supabaseUrlHint})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Fe,{children:[r.jsx(Ue,{children:o.backgroundColor}),r.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:_s.map(f=>r.jsx("button",{type:"button",onClick:()=>a.setBackgroundColor(f),className:`w-6 h-6 rounded-md transition ring-2 ring-offset-1 ring-offset-sidebar hover:scale-105 ${a.backgroundColor===f?"ring-accent":"ring-transparent hover:ring-white/30"}`,style:{backgroundColor:f},"aria-label":f},f))}),r.jsxs("div",{className:"mt-2 space-y-2",children:[r.jsxs("div",{className:"flex gap-1.5",children:[r.jsx("button",{type:"button",onClick:()=>a.setBackgroundMode("color"),className:`flex-1 py-1 px-2 rounded-lg text-[11px] font-medium border ${a.backgroundMode==="color"?"bg-accent/20 border-accent text-accent":"bg-white/5 border-white/10 text-text-secondary hover:bg-white/10"}`,children:o.backgroundModeColor}),r.jsx("button",{type:"button",onClick:()=>a.setBackgroundMode("image"),className:`flex-1 py-1 px-2 rounded-lg text-[11px] font-medium border ${a.backgroundMode==="image"?"bg-accent/20 border-accent text-accent":"bg-white/5 border-white/10 text-text-secondary hover:bg-white/10"}`,children:o.backgroundModeImage})]}),a.backgroundMode==="image"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx(Ue,{children:o.backgroundImage}),r.jsx("input",{type:"text",value:a.backgroundImageUrl??"",onChange:f=>a.setBackgroundImageUrl(f.target.value||null),placeholder:o.backgroundImageUrl,className:"w-full px-3 py-1.5 rounded-lg text-xs bg-white/5 border border-white/10 text-white placeholder-text-muted focus:ring-2 focus:ring-accent/40 focus:border-accent/40"}),r.jsx("input",{ref:c,type:"file",accept:"image/*",className:"hidden",onChange:f=>{var x;const h=(x=f.target.files)==null?void 0:x[0];if(h){const g=new FileReader;g.onload=()=>{const C=g.result;a.setBackgroundImageUrl(C)},g.readAsDataURL(h)}f.target.value=""}}),r.jsxs("button",{type:"button",onClick:()=>{var f;return(f=c.current)==null?void 0:f.click()},className:"inline-flex items-center justify-center gap-1.5 py-1 px-2 rounded-lg bg-white/5 border border-white/10 text-[11px] text-text-secondary hover:bg-white/10 hover:text-white transition",children:[r.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"upload"}),o.backgroundImageUpload]})]}),r.jsxs("div",{className:"mt-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-[11px] text-text-secondary",children:o.backgroundOverlayOpacity}),r.jsxs("span",{className:"text-[11px] text-text-muted",children:[a.backgroundOverlayOpacity,"%"]})]}),r.jsx("input",{type:"range",min:0,max:100,step:5,value:a.backgroundOverlayOpacity,onChange:f=>a.setBackgroundOverlayOpacity(Number(f.target.value)),className:"w-full accent-accent"})]})]})]})]}),r.jsxs(Fe,{children:[r.jsx(Ue,{children:o.categoryColumns}),r.jsx("div",{className:"flex gap-1.5 flex-wrap",children:[2,3,4,5,6].map(f=>r.jsx("button",{type:"button",onClick:()=>a.setCategoryColumns(f),className:`w-8 h-8 rounded-lg text-xs font-medium transition ${u(a.categoryColumns===f)}`,children:f},f))})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Fe,{children:[r.jsx(Ue,{children:o.categoryCardHeight}),r.jsxs("div",{className:"flex gap-1.5",children:[r.jsxs("button",{type:"button",onClick:()=>a.setCategoryCardHeight("auto"),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-2.5 rounded-lg text-xs font-medium transition ${u(a.categoryCardHeight==="auto")}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"vertical_align_top"}),o.byContent]}),r.jsxs("button",{type:"button",onClick:()=>a.setCategoryCardHeight("equal"),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-2.5 rounded-lg text-xs font-medium transition ${u(a.categoryCardHeight==="equal")}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"height"}),o.equalHeight]})]})]}),r.jsx(Fe,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-[10px] font-semibold uppercase text-text-muted tracking-wider",children:o.categoryColorFillContent}),r.jsx("button",{type:"button",onClick:()=>a.setCategoryColorFillContent(!a.categoryColorFillContent),className:`min-w-[60px] px-3 py-1 rounded-full text-[11px] font-medium transition ${a.categoryColorFillContent?"bg-accent/20 text-accent border border-accent/40":"bg-white/10 text-text-muted hover:bg-white/15 border border-white/10"}`,children:a.categoryColorFillContent?o.on:o.off})]})}),r.jsxs(Fe,{children:[r.jsx(Ue,{children:o.openLink}),r.jsxs("div",{className:"flex gap-1.5",children:[r.jsxs("button",{type:"button",onClick:()=>a.setOpenLinkIn("new_tab"),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-2.5 rounded-lg text-xs font-medium transition ${u(a.openLinkIn==="new_tab")}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"tab"}),o.newTab]}),r.jsxs("button",{type:"button",onClick:()=>a.setOpenLinkIn("current_tab"),className:`flex-1 flex items-center justify-center gap-1 py-1.5 px-2.5 rounded-lg text-xs font-medium transition ${u(a.openLinkIn==="current_tab")}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"open_in_new"}),o.currentTab]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Fe,{children:[r.jsx(Ue,{children:o.importData}),r.jsx("p",{className:"text-[11px] text-text-muted mb-2 leading-relaxed",children:o.importDescription}),r.jsx("input",{ref:l,type:"file",accept:".json,.html,.htm",className:"hidden",onChange:d}),r.jsxs("button",{type:"button",onClick:()=>{var f;return(f=l.current)==null?void 0:f.click()},className:"w-full inline-flex items-center justify-center gap-1.5 py-1.5 px-3 rounded-lg bg-white/5 border border-white/10 text-text-secondary hover:bg-white/10 hover:text-white transition text-xs",children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"upload_file"}),o.chooseFile]})]}),r.jsxs(Fe,{children:[r.jsx(Ue,{children:o.exportData}),r.jsx("p",{className:"text-[11px] text-text-muted mb-2 leading-relaxed",children:o.exportDescription}),r.jsxs("button",{type:"button",onClick:n,className:"w-full inline-flex items-center justify-center gap-1.5 py-1.5 px-3 rounded-lg bg-white/5 border border-white/10 text-text-secondary hover:bg-white/10 hover:text-white transition text-xs",children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"download"}),o.exportToHtml]})]}),r.jsxs(Fe,{children:[r.jsx(Ue,{children:o.dragDrop}),r.jsx("div",{className:"space-y-1.5",children:[{key:"board",label:o.moveBoard},{key:"category",label:o.moveCategory},{key:"bookmark",label:o.moveBookmark}].map(({key:f,label:h})=>r.jsxs("div",{className:"flex items-center justify-between py-1",children:[r.jsx("span",{className:"text-xs text-text-secondary",children:h}),r.jsx("button",{type:"button",onClick:()=>a.setDragDrop({[f]:!a.dragDrop[f]}),className:`min-w-[44px] px-2.5 py-1 rounded-full text-[11px] font-medium transition ${a.dragDrop[f]?"bg-accent/20 text-accent":"bg-white/10 text-text-muted hover:bg-white/15"}`,children:a.dragDrop[f]?o.on:o.off})]},f))})]})]})]})}),r.jsx("div",{className:"sticky bottom-0 flex justify-end px-5 py-3 border-t border-white/10 bg-sidebar/95 backdrop-blur-md",children:r.jsx("button",{type:"button",onClick:t,className:"py-1.5 px-4 rounded-lg bg-accent text-white text-xs font-medium hover:bg-accent/90 transition shadow-[0_0_12px_rgba(129,140,248,0.25)]",children:o.close})})]})})}function _l({open:e,editBoard:t,onClose:n,onSave:s}){const[a,o]=i.useState(""),[l,c]=i.useState(!1);if(i.useEffect(()=>{e&&o((t==null?void 0:t.name)??"")},[e,t==null?void 0:t.name]),!e)return null;const d=async u=>{if(u.preventDefault(),!!a.trim()){c(!0);try{await s(a.trim(),t==null?void 0:t.id),n()}finally{c(!1)}}};return r.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:n,children:r.jsxs("div",{className:"bg-sidebar border border-white/10 rounded-xl shadow-xl w-full max-w-sm p-4",onClick:u=>u.stopPropagation(),children:[r.jsx("h3",{className:"text-base font-semibold text-white mb-3",children:t?"Sa Board":"Thm Board"}),r.jsxs("form",{onSubmit:d,children:[r.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"Tn board"}),r.jsx("input",{type:"text",value:a,onChange:u=>o(u.target.value),placeholder:"VD: Cng vic",className:"w-full px-3 py-2 rounded-lg text-sm bg-white/5 border border-white/10 text-white placeholder-text-muted focus:ring-2 focus:ring-accent/40 focus:border-accent/40 mb-3",autoFocus:!0}),r.jsxs("div",{className:"flex justify-end gap-1.5",children:[r.jsx("button",{type:"button",onClick:n,className:"px-3 py-1.5 rounded-lg text-xs border border-white/10 text-text-secondary hover:bg-white/10",children:"Hy"}),r.jsx("button",{type:"submit",disabled:l||!a.trim(),className:"px-3 py-1.5 rounded-lg text-xs bg-accent text-white hover:bg-accent/90 disabled:opacity-50",children:l?"ang lu...":"Lu"})]})]})]})})}function ze({children:e}){return r.jsx("label",{className:"block text-[10px] font-semibold uppercase text-text-muted tracking-wider mb-1",children:e})}function He({value:e,onChange:t,placeholder:n,rows:s=4,className:a="",error:o,readOnly:l}){return r.jsx("textarea",{value:e,onChange:t?c=>t(c.target.value):void 0,readOnly:l,placeholder:n,rows:s,className:`w-full px-3 py-2 rounded-lg border bg-white/5 text-xs text-white placeholder-text-muted focus:ring-2 focus:ring-accent/40 focus:border-accent/40 resize-y font-mono ${o?"border-red-500/60":"border-white/10"} ${a}`})}const Al={primary:"bg-accent/20 border-accent/50 text-accent hover:bg-accent/30 hover:text-white",success:"bg-emerald-500/20 border-emerald-500/50 text-emerald-400 hover:bg-emerald-500/30 hover:text-white",warning:"bg-amber-500/20 border-amber-500/50 text-amber-400 hover:bg-amber-500/30 hover:text-white",info:"bg-sky-500/20 border-sky-500/50 text-sky-400 hover:bg-sky-500/30 hover:text-white",neutral:"bg-white/5 border-white/10 text-text-secondary hover:bg-white/10 hover:text-white"};function Ze({onClick:e,children:t,disabled:n,variant:s="neutral"}){return r.jsx("button",{type:"button",onClick:e,disabled:n,className:`w-[8.5rem] flex items-center justify-center px-5 py-2.5 rounded-lg text-sm font-medium border disabled:opacity-50 transition ${Al[s]}`,children:t})}function Pl(){const[e,t]=i.useState(""),[n,s]=i.useState(""),[a,o]=i.useState(null),l=()=>{o(null);try{const u=JSON.parse(e||"{}");s(JSON.stringify(u,null,2))}catch(u){o(u instanceof Error?u.message:"Invalid JSON"),s("")}},c=()=>{o(null);try{const u=JSON.parse(e||"{}");s(JSON.stringify(u))}catch(u){o(u instanceof Error?u.message:"Invalid JSON"),s("")}},d=()=>{o(null);try{const u=JSON.parse(e||"null");s(JSON.stringify(u,null,2))}catch(u){o(u instanceof Error?u.message:"Invalid JSON"),s("")}};return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr] gap-5 h-full min-h-0 items-stretch",children:[r.jsxs("div",{className:"flex flex-col min-h-0 flex-1",children:[r.jsx(ze,{children:"Nhp / Dn JSON"}),r.jsx(He,{value:e,onChange:t,placeholder:'{"key": "value"}',error:!!a,rows:14,className:"flex-1 min-h-[140px]"}),a&&r.jsx("p",{className:"mt-1.5 text-[11px] text-red-400",children:a})]}),r.jsxs("div",{className:"flex flex-col justify-center gap-2.5 flex-shrink-0",children:[r.jsx(Ze,{onClick:l,variant:"success",children:"Lm p"}),r.jsx(Ze,{onClick:c,variant:"warning",children:"Lm gn"}),r.jsx(Ze,{onClick:d,variant:"primary",children:"Decode"})]}),r.jsxs("div",{className:"flex flex-col min-h-0 flex-1",children:[r.jsx(ze,{children:"Kt qu"}),r.jsx(He,{value:n,onChange:void 0,placeholder:"Kt qu hin th  y",readOnly:!0,rows:14,className:"flex-1 min-h-[140px]"})]})]})}function Dr(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=t.length%4,s=n?t+"=".repeat(4-n):t;try{return decodeURIComponent(atob(s).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""))}catch{return""}}function Rr(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Or(e,t){const n=new TextEncoder,s=n.encode(e),a=n.encode(t),o=await crypto.subtle.importKey("raw",s,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),l=await crypto.subtle.sign("HMAC",o,a),c=new Uint8Array(l);let d="";for(let u=0;u<c.length;u++)d+=String.fromCharCode(c[u]);return btoa(d).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Bl(){const[e,t]=i.useState(""),[n,s]=i.useState(""),[a,o]=i.useState(""),[l,c]=i.useState(""),[d,u]=i.useState(null),[f,h]=i.useState(""),[x,g]=i.useState(""),[C,b]=i.useState(""),[p,N]=i.useState(null),[S,j]=i.useState("decode"),R=async()=>{N(null),u(null);const y=e.trim();if(!y){o(""),c("");return}const E=y.split(".");if(E.length!==3){N("JWT phi c 3 phn (header.payload.signature)"),o(""),c("");return}try{const D=Dr(E[0]),M=Dr(E[1]);if(o(D?(()=>{try{return JSON.stringify(JSON.parse(D),null,2)}catch{return D}})():""),c(M?(()=>{try{return JSON.stringify(JSON.parse(M),null,2)}catch{return M}})():""),n.trim()){const X=await Or(n.trim(),`${E[0]}.${E[1]}`),F=E[2];u(X===F)}}catch(D){N(D instanceof Error?D.message:"Li decode"),o(""),c("")}},I=()=>{try{const y=JSON.parse(l||"{}");c(JSON.stringify(y,null,2))}catch{}},A=()=>{try{const y=JSON.parse(l||"{}");c(JSON.stringify(y))}catch{}},L=async()=>{N(null);try{const y=Rr(JSON.stringify({alg:"HS256",typ:"JWT"})),E=Rr(f.trim()||"{}"),D=`${y}.${E}`;if(x.trim()){const M=await Or(x.trim(),D);b(`${D}.${M}`)}else b(`${D}.`)}catch(y){N(y instanceof Error?y.message:"Li encode"),b("")}};return Q.useEffect(()=>{if(!e.trim()){o(""),c(""),u(null),N(null);return}R()},[e,n]),Q.useEffect(()=>{if(!f.trim()){b(""),N(null);return}L()},[f,x]),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 h-full min-h-0 items-stretch",children:[r.jsxs("div",{className:"flex flex-col min-h-0 gap-3 overflow-y-auto flex-1",children:[r.jsxs("div",{className:"flex gap-1.5 mb-1",children:[r.jsx("button",{type:"button",onClick:()=>j("decode"),className:`flex-1 py-1.5 px-2 rounded-lg text-[11px] font-medium border ${S==="decode"?"bg-violet-500/20 border-violet-400 text-violet-200":"bg-white/5 border-white/10 text-text-secondary hover:bg-white/10"}`,children:"Decode"}),r.jsx("button",{type:"button",onClick:()=>j("encode"),className:`flex-1 py-1.5 px-2 rounded-lg text-[11px] font-medium border ${S==="encode"?"bg-amber-500/20 border-amber-400 text-amber-200":"bg-white/5 border-white/10 text-text-secondary hover:bg-white/10"}`,children:"Encode"})]}),S==="decode"?r.jsxs("div",{className:"rounded-lg border border-violet-500/20 bg-violet-500/5 p-3.5 space-y-2.5 flex-shrink-0",children:[r.jsx(ze,{children:"JWT"}),r.jsx(He,{value:e,onChange:t,placeholder:"Dn token JWT",rows:6}),r.jsx("input",{type:"text",value:n,onChange:y=>s(y.target.value),placeholder:"Secret (verify)",className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-white/5 text-xs text-white placeholder-text-muted"}),d!==null&&r.jsxs("p",{className:`text-[11px] ${d?"text-emerald-400":"text-red-400"}`,children:["Ch k: ",d?"Hp l":"Khng hp l"]}),p&&r.jsx("p",{className:"text-[11px] text-red-400",children:p})]}):r.jsxs("div",{className:"rounded-lg border border-amber-500/20 bg-amber-500/5 p-3.5 space-y-2.5 flex-shrink-0",children:[r.jsx(ze,{children:"Payload (JSON)"}),r.jsx(He,{value:f,onChange:h,placeholder:'{"sub":"user123","exp":9999999999}',rows:8}),r.jsx("input",{type:"text",value:x,onChange:y=>g(y.target.value),placeholder:"Secret",className:"w-full px-3 py-2 rounded-lg border border-white/10 bg-white/5 text-xs text-white placeholder-text-muted"}),p&&r.jsx("p",{className:"text-[11px] text-red-400",children:p})]})]}),r.jsx("div",{className:"flex flex-col min-h-0 gap-4 overflow-y-auto flex-1",children:S==="decode"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/[0.02] p-3.5 flex flex-col min-h-0",children:[r.jsx(ze,{children:"Header"}),r.jsx(He,{value:a,onChange:void 0,readOnly:!0,rows:3,className:"min-h-[64px]"})]}),r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/[0.02] p-3.5 flex flex-col min-h-0 flex-1",children:[r.jsx(ze,{children:"Payload"}),r.jsx(He,{value:l,onChange:c,rows:10,className:"min-h-[140px] flex-1"}),r.jsxs("div",{className:"mt-1.5 flex gap-2",children:[r.jsx(Ze,{onClick:I,variant:"success",children:"Lm p"}),r.jsx(Ze,{onClick:A,variant:"warning",children:"Lm gn"})]})]})]}):r.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/[0.02] p-3.5 flex flex-col min-h-0 flex-1",children:[r.jsx(ze,{children:"JWT sau Encode"}),r.jsx(He,{value:C,onChange:void 0,readOnly:!0,rows:12,placeholder:"JWT sau encode",className:"min-h-[160px] flex-1"})]})})]})}function $l(){const[e,t]=i.useState(""),[n,s]=i.useState(""),[a,o]=i.useState(null),l=()=>{o(null);try{s(encodeURIComponent(e))}catch(d){o(d instanceof Error?d.message:"Li encode"),s("")}},c=()=>{o(null);try{s(decodeURIComponent(e))}catch(d){o(d instanceof Error?d.message:"Li decode"),s("")}};return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr] gap-5 h-full min-h-0 items-stretch",children:[r.jsxs("div",{className:"flex flex-col min-h-0 flex-1",children:[r.jsx(ze,{children:"Nhp chui"}),r.jsx(He,{value:e,onChange:t,placeholder:"https://example.com?q=hello world",rows:14,className:"flex-1 min-h-[140px]"}),a&&r.jsx("p",{className:"mt-1.5 text-[11px] text-red-400",children:a})]}),r.jsxs("div",{className:"flex flex-col justify-center gap-2.5 flex-shrink-0",children:[r.jsx(Ze,{onClick:l,variant:"info",children:"Encode"}),r.jsx(Ze,{onClick:c,variant:"primary",children:"Decode"})]}),r.jsxs("div",{className:"flex flex-col min-h-0 flex-1",children:[r.jsx(ze,{children:"Kt qu"}),r.jsx(He,{value:n,onChange:void 0,readOnly:!0,placeholder:"Kt qu",rows:14,className:"flex-1 min-h-[140px]"})]})]})}function Ul(){const[e,t]=i.useState(""),[n,s]=i.useState(""),[a,o]=i.useState(null),l=()=>{o(null);try{s(btoa(unescape(encodeURIComponent(e))))}catch(d){o(d instanceof Error?d.message:"Li encode"),s("")}},c=()=>{o(null);try{s(decodeURIComponent(escape(atob(e.replace(/\s/g,"")))))}catch(d){o(d instanceof Error?d.message:"Chui khng phi Base64 hp l"),s("")}};return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr] gap-5 h-full min-h-0 items-stretch",children:[r.jsxs("div",{className:"flex flex-col min-h-0 flex-1",children:[r.jsx(ze,{children:"Nhp chui"}),r.jsx(He,{value:e,onChange:t,placeholder:"Vn bn hoc Base64",rows:14,className:"flex-1 min-h-[140px]"}),a&&r.jsx("p",{className:"mt-1.5 text-[11px] text-red-400",children:a})]}),r.jsxs("div",{className:"flex flex-col justify-center gap-2.5 flex-shrink-0",children:[r.jsx(Ze,{onClick:l,variant:"success",children:"Encode"}),r.jsx(Ze,{onClick:c,variant:"primary",children:"Decode"})]}),r.jsxs("div",{className:"flex flex-col min-h-0 flex-1",children:[r.jsx(ze,{children:"Kt qu"}),r.jsx(He,{value:n,onChange:void 0,readOnly:!0,placeholder:"Kt qu",rows:14,className:"flex-1 min-h-[140px]"})]})]})}const Fl={jwt:{active:"border-violet-500 text-violet-400 bg-violet-500/10",icon:"token"},json:{active:"border-accent text-accent bg-accent/10",icon:"data_object"},url:{active:"border-emerald-500 text-emerald-400 bg-emerald-500/10",icon:"link"},base64:{active:"border-amber-500 text-amber-400 bg-amber-500/10",icon:"code"}},zl=[{id:"jwt",label:"JWT"},{id:"json",label:"JSON"},{id:"url",label:"URL"},{id:"base64",label:"Base64"}];function Hl({open:e,onClose:t}){const[n,s]=i.useState("jwt");return e?r.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:t,children:r.jsxs("div",{className:"bg-sidebar border border-white/10 rounded-2xl shadow-2xl w-[80vw] max-w-[80vw] h-[80vh] max-h-[80vh] flex flex-col overflow-hidden",role:"dialog","aria-labelledby":"it-toolbox-title",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10 flex-shrink-0",children:[r.jsxs("h2",{id:"it-toolbox-title",className:"flex items-center gap-2 text-base font-semibold text-white",children:[r.jsx("span",{className:"material-symbols-outlined text-accent text-[20px]",children:"build"}),"IT Tool box"]}),r.jsx("button",{type:"button",onClick:t,className:"p-1.5 rounded-lg text-text-muted hover:text-white hover:bg-white/10 transition","aria-label":"ng",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"close"})})]}),r.jsx("div",{className:"flex border-b border-white/10 px-2 gap-0.5 flex-shrink-0 overflow-x-auto",children:zl.map(({id:a,label:o})=>{const l=Fl[a];return r.jsxs("button",{type:"button",onClick:()=>s(a),className:`flex items-center gap-1.5 px-3 py-2.5 text-xs font-medium rounded-t-lg border-b-2 transition whitespace-nowrap ${n===a?l.active:"border-transparent text-text-muted hover:text-white hover:bg-white/5"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:l.icon}),o]},a)})}),r.jsx("div",{className:"flex-1 overflow-hidden p-5 min-h-0 flex flex-col",children:r.jsxs("div",{className:"flex-1 min-h-0 overflow-hidden",children:[n==="json"&&r.jsx(Pl,{}),n==="jwt"&&r.jsx(Bl,{}),n==="url"&&r.jsx($l,{}),n==="base64"&&r.jsx(Ul,{})]})})]})}):null}const ql="modulepreload",Wl=function(e){return"/"+e},Ir={},Jl=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(n.map(d=>{if(d=Wl(d),d in Ir)return;Ir[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":ql,u||(h.as="script"),h.crossOrigin="",h.href=d,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((x,g)=>{h.addEventListener("load",x),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return a.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})},jn=30,Mn=[{bg:"from-violet-500 to-purple-600",border:"border-violet-400/50",ring:"ring-violet-400/20"},{bg:"from-blue-500 to-cyan-500",border:"border-blue-400/50",ring:"ring-blue-400/20"},{bg:"from-emerald-500 to-teal-500",border:"border-emerald-400/50",ring:"ring-emerald-400/20"},{bg:"from-amber-500 to-orange-500",border:"border-amber-400/50",ring:"ring-amber-400/20"},{bg:"from-rose-500 to-pink-500",border:"border-rose-400/50",ring:"ring-rose-400/20"},{bg:"from-indigo-500 to-blue-600",border:"border-indigo-400/50",ring:"ring-indigo-400/20"},{bg:"from-fuchsia-500 to-pink-600",border:"border-fuchsia-400/50",ring:"ring-fuchsia-400/20"},{bg:"from-sky-500 to-blue-500",border:"border-sky-400/50",ring:"ring-sky-400/20"}];function ws(e,t){let n=t;for(let s=0;s<(e||"").length;s++)n=n*31+e.charCodeAt(s)>>>0;return Mn[Math.abs(n)%Mn.length]}function Kl(){const[,e]=i.useState(0);i.useEffect(()=>{const t=setInterval(()=>e(n=>n+1),1e3);return()=>clearInterval(t)},[])}function Nn({children:e}){return r.jsx("label",{className:"block text-[10px] font-semibold uppercase text-text-muted tracking-wider mb-1",children:e})}function Xl({open:e,onClose:t,userId:n}){const s=ht(),a=Y(s.locale),{entries:o,loading:l,addEntry:c,deleteEntry:d,updateOrder:u,refetch:f}=Lr(n),[h,x]=i.useState(!1),[g,C]=i.useState("qr"),[b,p]=i.useState(null),[N,S]=i.useState(""),[j,R]=i.useState(""),[I,A]=i.useState(""),[L,y]=i.useState(null),[E,D]=i.useState(null),[M,X]=i.useState(null),[F,z]=i.useState(null),[_,$]=i.useState(null);Kl(),i.useEffect(()=>{e&&n&&f()},[e,n,f]);const T=i.useCallback(P=>{navigator.clipboard.writeText(P)},[]),me=i.useCallback(async()=>{if(y(null),!I.trim()){y(a.pleaseEnterSecret);return}try{await c(N.trim(),j.trim(),I.trim()),S(""),R(""),A(""),x(!1),C("qr"),p(null)}catch(P){const J=P instanceof Error?P.message:"Li thm ti khon",te=J&&/schema cache|could not find the table/i.test(J)?` ${a.schemaCacheHint} ${a.connectedTo}: ${Vt}`:"";y(J+te)}},[c,N,j,I,a]),ae=i.useCallback(()=>{x(!1),C("qr"),p(null),y(null),S(""),R(""),A(""),D(null),X(null),z(null),$(null),F&&URL.revokeObjectURL(F),E&&URL.revokeObjectURL(E)},[F,E]),[H,Ce]=i.useState(""),Z=o.filter(P=>!H.trim()||P.issuer.toLowerCase().includes(H.toLowerCase())||P.account_name.toLowerCase().includes(H.toLowerCase())),G=Vr(Yr(un,{activationConstraint:{distance:8}})),se=i.useCallback(P=>{const{active:J,over:ce}=P;if(!ce||J.id===ce.id)return;const te=String(J.id),U=String(ce.id),O=o.findIndex(oe=>oe.id===te),ne=o.findIndex(oe=>oe.id===U);if(O===-1||ne===-1)return;const ee=mn(o,O,ne);u(ee)},[o,u]);return e?r.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:t,children:r.jsx("div",{className:`relative rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-white/5 ${h?"w-[95vw] max-w-[960px] max-h-[90vh] bg-[#182234]":"w-full max-w-[420px] max-h-[800px] h-[75vh] bg-[#151b28]"}`,role:"dialog","aria-labelledby":"authenticator-title",onClick:P=>P.stopPropagation(),children:n?h?r.jsx(Vl,{t:a,addMode:g,setAddMode:C,qrSubMode:b,setQrSubMode:p,manualIssuer:N,setManualIssuer:S,manualAccount:j,setManualAccount:R,manualSecret:I,setManualSecret:A,onAddManual:me,onClose:ae,addError:L,selectedFile:M,setSelectedFile:X,imagePreviewUrl:F,setImagePreviewUrl:z,capturedImageUrl:E,setCapturedImageUrl:D,qrDecodeError:_,setQrDecodeError:$,onEntryAdded:()=>{ae(),f()},userId:n}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col gap-5 p-6 pb-2 z-10 bg-[#151b28]/95 backdrop-blur-sm sticky top-0 border-b border-white/5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{id:"authenticator-title",className:"text-white text-2xl font-bold tracking-tight",children:a.authenticator}),r.jsx("button",{type:"button",onClick:t,className:"flex items-center justify-center w-8 h-8 rounded-full text-gray-400 hover:text-white hover:bg-white/5 transition-all","aria-label":a.close,children:r.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("span",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none text-gray-500 group-focus-within:text-accent transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"search"})}),r.jsx("input",{type:"text",value:H,onChange:P=>Ce(P.target.value),placeholder:a.searchAccounts,className:"block w-full pl-11 pr-4 py-3 rounded-xl bg-[#1e2532] border-none text-white placeholder-gray-500 focus:ring-1 focus:ring-accent focus:bg-[#232b3a] transition-all text-sm font-medium"})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-2 space-y-1 pb-24 relative",children:[l?r.jsx("p",{className:"text-[#90a4cb] text-sm py-6",children:"ang ti..."}):Z.length===0?r.jsx("p",{className:"text-[#90a4cb] text-sm py-6",children:o.length===0?a.noAccountsYet:"Khng c kt qu."}):H.trim()?Z.map((P,J)=>r.jsx(js,{entry:P,onCopy:T,onDelete:()=>d(P.id),t:a,accentColor:ws(P.issuer??"",J)},P.id)):r.jsx(ms,{sensors:G,collisionDetection:Qr,onDragEnd:se,children:r.jsx(bs,{items:o.map(P=>P.id),strategy:Sl,children:o.map((P,J)=>r.jsx(Yl,{entry:P,index:J,onCopy:T,onDelete:()=>d(P.id),t:a},P.id))})}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-[#151b28] to-transparent pointer-events-none z-10","aria-hidden":!0})]}),r.jsx("div",{className:"absolute bottom-6 right-6 z-20",children:r.jsx("button",{type:"button",onClick:()=>x(!0),className:"w-14 h-14 bg-accent rounded-full shadow-[0_0_20px_-5px_rgba(129,140,248,0.5)] flex items-center justify-center text-white hover:opacity-90 active:scale-95 transition-all group","aria-label":a.addAccount,children:r.jsx("span",{className:"material-symbols-outlined text-[28px] group-hover:rotate-90 transition-transform duration-300",children:"add"})})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10 flex-shrink-0",children:[r.jsx("h2",{id:"authenticator-title",className:"text-xl font-bold tracking-tight text-white",children:a.authenticator}),r.jsx("button",{type:"button",onClick:t,className:"p-2 rounded-lg text-[#90a4cb] hover:text-white hover:bg-white/5","aria-label":a.close,children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),r.jsx("p",{className:"text-[#90a4cb] text-sm py-6 px-6",children:a.loginToUseAuthenticator})]})})}):null}function js({entry:e,onCopy:t,onDelete:n,t:s,accentColor:a}){const[o,l]=i.useState("------"),[c,d]=i.useState(!1),u=Ps(jn),f=u/jn*100,h=u<=5,x=11,g=2*Math.PI*x,C=g-f/100*g,b=a??Mn[0];i.useEffect(()=>{let j=!1;return As(e.secret,jn).then(R=>{j||l(R)}).catch(()=>{j||l("------")}),()=>{j=!0}},[e.secret,u]);const p=()=>{t(o),d(!0),setTimeout(()=>d(!1),1500)},N=o!=="------"?`${o.slice(0,3)} ${o.slice(3)}`:"------",S=(e.issuer||e.account_name||"A").charAt(0).toUpperCase();return r.jsxs("div",{className:`group relative flex items-center justify-between p-3.5 rounded-xl transition-all cursor-pointer border-l-4 ${b.border} hover:bg-[#1e2532] hover:shadow-md hover:ring-1 ${b.ring} border-y border-r border-transparent hover:border-white/5`,onClick:p,children:[r.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[r.jsx("div",{className:`shrink-0 w-11 h-11 rounded-xl bg-gradient-to-br ${b.bg} flex items-center justify-center overflow-hidden shadow-md ring-2 ring-white/20`,children:r.jsx("span",{className:"text-white font-bold text-lg drop-shadow",children:S})}),r.jsxs("div",{className:"flex flex-col min-w-0",children:[r.jsx("span",{className:"text-white font-semibold text-[15px] truncate",children:e.issuer||"Account"}),r.jsx("span",{className:"text-[#90a4cb] text-xs truncate",children:e.account_name||""})]})]}),r.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[r.jsx("span",{className:`font-mono font-semibold text-lg tracking-wider transition-colors ${h?"text-red-400 animate-pulse":"text-white group-hover:text-accent"}`,children:N}),r.jsx("div",{className:"relative w-[28px] h-[28px] flex items-center justify-center shrink-0",title:`${u}s`,children:r.jsxs("svg",{className:"transform -rotate-90 w-full h-full drop-shadow-sm",viewBox:"0 0 28 28",children:[r.jsx("circle",{cx:"14",cy:"14",fill:"transparent",r:x,stroke:"#1e293b",strokeWidth:"2.5"}),r.jsx("circle",{className:"transition-all duration-1000",cx:"14",cy:"14",fill:"transparent",r:x,stroke:h?"#ef4444":"currentColor",strokeDasharray:g,strokeDashoffset:C,strokeLinecap:"round",strokeWidth:"2.5",style:{color:"var(--tw-accent, #818CF8)"}})]})}),r.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),n()},className:"shrink-0 w-8 h-8 flex items-center justify-center rounded-lg text-[#90a4cb] hover:text-red-400 hover:bg-red-500/10 transition-colors","aria-label":s.delete,children:r.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete_outline"})})]}),c&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#1e2532]/95 rounded-xl pointer-events-none",children:r.jsxs("span",{className:"text-accent font-medium text-sm flex items-center gap-1 drop-shadow",children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"content_copy"}),s.copied]})})]})}function Yl({entry:e,index:t,onCopy:n,onDelete:s,t:a}){const{attributes:o,listeners:l,setNodeRef:c,setActivatorNodeRef:d,transform:u,transition:f,isDragging:h}=ys({id:e.id}),x={transform:et.Transform.toString(u),transition:f},g=ws(e.issuer??"",t);return r.jsxs("div",{ref:c,style:x,className:`flex items-stretch gap-0 ${h?"opacity-70 scale-[0.98] z-50":""}`,children:[r.jsx("div",{ref:d,...o,...l,className:"flex items-center justify-center w-8 shrink-0 cursor-grab active:cursor-grabbing text-[#64748b] hover:text-[#94a3b8] touch-none","aria-label":a.dragDrop,children:r.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"drag_indicator"})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx(js,{entry:e,onCopy:n,onDelete:s,t:a,accentColor:g})})]})}function Vl(e){var z;const{t,addMode:n,setAddMode:s,setQrSubMode:a,manualIssuer:o,setManualIssuer:l,manualAccount:c,setManualAccount:d,manualSecret:u,setManualSecret:f,onAddManual:h,onClose:x,addError:g,setSelectedFile:C,setImagePreviewUrl:b,setCapturedImageUrl:p,setQrDecodeError:N,onEntryAdded:S,userId:j}=e,R=Q.useRef(null),[I,A]=i.useState(!1),L=e.imagePreviewUrl||e.capturedImageUrl,y=i.useCallback(_=>{var T;if(!_||!_.type.startsWith("image/"))return;N(null),C(_),(T=e.imagePreviewUrl)!=null&&T.startsWith("blob:")&&URL.revokeObjectURL(e.imagePreviewUrl),p(null);const $=new FileReader;$.onload=()=>{b($.result)},$.onerror=()=>{N(t.decodeError)},$.readAsDataURL(_)},[e.imagePreviewUrl,b,p,C,N,t.decodeError]),E=_=>{var T;const $=(T=_.target.files)==null?void 0:T[0];$&&y($),_.target.value=""},D=_=>{_.preventDefault(),_.stopPropagation(),_.dataTransfer.types.includes("Files")&&(_.dataTransfer.dropEffect="copy"),A(!0)},M=_=>{_.preventDefault(),_.stopPropagation(),_.currentTarget.contains(_.relatedTarget)||A(!1)},X=_=>{var T;_.preventDefault(),_.stopPropagation(),A(!1);const $=(T=_.dataTransfer.files)==null?void 0:T[0];$&&y($)},F=i.useCallback(()=>{var _;if(N(null),typeof chrome>"u"||!((_=chrome.runtime)!=null&&_.sendMessage)){N(t.captureNotAvailable);return}chrome.runtime.sendMessage({type:"CAPTURE_VISIBLE_TAB"},$=>{const T=chrome.runtime.lastError;if(T){N(t.captureError+(T.message?` (${T.message})`:""));return}$!=null&&$.ok&&$.dataUrl?(e.capturedImageUrl&&URL.revokeObjectURL(e.capturedImageUrl),p($.dataUrl)):$&&!$.ok&&N(t.captureError+($.error?` (${$.error})`:""))})},[p,N,e.capturedImageUrl,t]);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#314368] shrink-0",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("h1",{className:"text-xl font-bold tracking-tight text-white",children:t.addNewAuthenticator}),r.jsx("p",{className:"text-sm text-[#90a4cb]",children:t.chooseHowToAdd})]}),r.jsx("button",{type:"button",onClick:x,className:"p-2 rounded-lg text-[#90a4cb] hover:text-white hover:bg-white/5 transition-colors","aria-label":t.close,children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),n==="manual"?r.jsx("div",{className:"overflow-y-auto p-6 md:p-8",children:r.jsxs("div",{className:"max-w-md space-y-4",children:[r.jsxs("div",{children:[r.jsx(Nn,{children:t.issuer}),r.jsx("input",{type:"text",value:o,onChange:_=>l(_.target.value),placeholder:"Google",className:"w-full px-3 py-2.5 rounded-lg border border-[#314368] bg-[#1e2532] text-sm text-white placeholder-[#90a4cb] focus:ring-1 focus:ring-accent"})]}),r.jsxs("div",{children:[r.jsx(Nn,{children:t.accountName}),r.jsx("input",{type:"text",value:c,onChange:_=>d(_.target.value),placeholder:"user@gmail.com",className:"w-full px-3 py-2.5 rounded-lg border border-[#314368] bg-[#1e2532] text-sm text-white placeholder-[#90a4cb] focus:ring-1 focus:ring-accent"})]}),r.jsxs("div",{children:[r.jsx(Nn,{children:t.secretBase32}),r.jsx("input",{type:"text",value:u,onChange:_=>f(_.target.value),placeholder:"JBSWY3DPEHPK3PXP",className:"w-full px-3 py-2.5 rounded-lg border border-[#314368] bg-[#1e2532] text-sm text-white font-mono placeholder-[#90a4cb] focus:ring-1 focus:ring-accent"})]}),g&&r.jsx("p",{className:"text-sm text-red-400",children:g}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx("button",{type:"button",onClick:h,className:"px-6 py-2.5 rounded-lg bg-accent/20 text-accent border border-accent/50 text-sm font-semibold hover:bg-accent/30 transition-colors",children:t.add}),r.jsx("button",{type:"button",onClick:x,className:"px-6 py-2.5 rounded-lg border border-[#314368] text-sm font-medium text-white hover:bg-white/5 transition-colors",children:t.cancel})]})]})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-y-auto p-6 md:p-8 flex-1 min-h-0",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-stretch",children:[r.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"material-symbols-outlined text-accent",children:"qr_code_scanner"}),r.jsx("h2",{className:"text-base font-semibold text-white",children:t.scanQRCode})]}),r.jsxs("div",{className:"relative w-full aspect-[4/3] bg-black rounded-xl overflow-hidden border border-[#314368] ring-2 ring-transparent ring-offset-2 ring-offset-[#182234] focus-within:ring-accent",children:[L?r.jsx("div",{className:"absolute inset-0 flex flex-col",children:r.jsx(Ql,{t,imageUrl:L,userId:j,onEntryAdded:S,onError:e.setQrDecodeError,embedded:!0,fileType:(z=e.selectedFile)==null?void 0:z.type})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute inset-0 bg-[#1e2532] flex items-center justify-center p-8 md:p-12",children:r.jsxs("div",{className:"relative w-full h-full max-w-[280px] max-h-[280px] flex items-center justify-center",children:[r.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-white/80 rounded-tl-lg"}),r.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-white/80 rounded-tr-lg"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-white/80 rounded-bl-lg"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-white/80 rounded-br-lg"}),r.jsx("div",{className:"absolute left-0 right-0 h-0.5 bg-accent animate-pulse opacity-80",style:{boxShadow:"0 0 15px rgba(129,140,248,0.8)"}})]})}),r.jsx("p",{className:"absolute bottom-4 left-0 right-0 text-center text-sm text-[#90a4cb] px-4",children:t.uploadScreenshotQR})]}),e.qrDecodeError&&r.jsx("p",{className:"absolute top-2 left-2 right-2 text-xs text-red-400 bg-black/60 px-2 py-1 rounded",children:e.qrDecodeError})]}),r.jsx("p",{className:"text-sm text-[#90a4cb] text-center",children:t.pointCameraAtQR})]}),r.jsxs("div",{className:"flex md:flex-col items-center justify-center gap-4 text-[#90a4cb] shrink-0",children:[r.jsx("div",{className:"h-px w-full md:w-px md:h-16 bg-[#314368]"}),r.jsx("span",{className:"text-xs font-bold uppercase tracking-wider px-2",children:"OR"}),r.jsx("div",{className:"h-px w-full md:w-px md:h-16 bg-[#314368]"})]}),r.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"material-symbols-outlined text-accent",children:"upload_file"}),r.jsx("h2",{className:"text-base font-semibold text-white",children:t.uploadQRImage})]}),r.jsxs("label",{className:`flex-1 min-h-[240px] flex flex-col items-center justify-center gap-4 rounded-xl border-2 border-dashed transition-all cursor-pointer p-6 text-center group ${I?"border-accent bg-accent/10":"border-[#314368] bg-white/5 hover:bg-white/10 hover:border-accent/50"}`,onDragOver:D,onDragLeave:M,onDrop:X,children:[r.jsx("input",{ref:R,type:"file",accept:"image/*,.svg,.svgz",onChange:E,className:"hidden"}),r.jsx("div",{className:"w-16 h-16 rounded-full bg-[#182234] flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:r.jsx("span",{className:"material-symbols-outlined text-3xl text-accent",children:"cloud_upload"})}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("p",{className:"text-lg font-bold text-white",children:t.clickOrDragFile}),r.jsx("p",{className:"text-sm text-[#90a4cb] max-w-[200px]",children:t.supportsPNGJPG})]}),r.jsx("span",{className:"mt-2 px-4 py-2 bg-[#182234] border border-[#314368] rounded-lg text-sm font-medium text-white shadow-sm hover:bg-[#222f49] transition-colors",onClick:_=>{var $;_.preventDefault(),($=R.current)==null||$.click()},children:t.selectFile})]}),r.jsx("p",{className:"text-sm text-[#90a4cb] text-center",children:t.uploadScreenshotQR}),r.jsx("div",{className:"flex gap-2 justify-center",children:r.jsx("button",{type:"button",onClick:F,className:"px-3 py-2 rounded-lg text-xs font-medium border border-[#314368] text-[#90a4cb] hover:bg-white/5 hover:text-white transition-colors",children:t.captureScreen})})]})]})}),r.jsxs("div",{className:"bg-[#182234] border-t border-[#314368] p-6 rounded-b-2xl flex flex-col sm:flex-row items-center justify-between gap-4 shrink-0",children:[r.jsxs("button",{type:"button",onClick:()=>s("manual"),className:"flex items-center gap-2 text-sm text-[#90a4cb] hover:text-white transition-colors group",children:[r.jsx("span",{className:"material-symbols-outlined text-[18px] group-hover:text-accent transition-colors",children:"keyboard"}),r.jsx("span",{children:t.cantScanEnterManually})]}),r.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:r.jsx("button",{type:"button",onClick:x,className:"flex-1 sm:flex-none px-6 py-2.5 rounded-lg border border-[#314368] text-sm font-medium text-white hover:bg-white/5 transition-colors",children:t.cancel})})]})]})]})}function Ql({t:e,imageUrl:t,userId:n,onEntryAdded:s,onError:a,embedded:o,fileType:l}){const c=Q.useRef(null),d=Q.useRef(null),[u,f]=i.useState(null),[h,x]=i.useState(null),[g,C]=i.useState(null),[b,p]=i.useState(!1),N=Q.useRef(null),{addEntry:S}=Lr(n),j=y=>{const E=y.currentTarget;N.current=E,C({w:E.naturalWidth,h:E.naturalHeight})},R=y=>{if(!d.current)return;const E=d.current.getBoundingClientRect();x({x:y.clientX-E.left,y:y.clientY-E.top}),f(null)},I=y=>{if(!h||!d.current)return;const E=d.current.getBoundingClientRect(),D=y.clientX-E.left,M=y.clientY-E.top;f({x:Math.min(h.x,D),y:Math.min(h.y,M),w:Math.abs(D-h.x),h:Math.abs(M-h.y)})},A=()=>{x(null)},L=i.useCallback(async()=>{var E;if(!N.current||!c.current)return;if(l==="image/svg+xml"){a(e.svgNotSupportedForScan);return}const y=N.current;if(!y.complete||y.naturalWidth===0||y.naturalHeight===0){a(e.imageNotLoaded);return}p(!0),a(null);try{const D=c.current,M=D.getContext("2d");if(!M)throw new Error("No canvas context");let X=0,F=0,z=y.naturalWidth,_=y.naturalHeight;const $=(E=d.current)==null?void 0:E.getBoundingClientRect();if($&&$.width>0&&$.height>0&&u&&u.w>10&&u.h>10){const U=y.naturalWidth/$.width,O=y.naturalHeight/$.height;X=Math.round(u.x*U),F=Math.round(u.y*O),z=Math.round(u.w*U),_=Math.round(u.h*O)}(z<10||_<10)&&(z=y.naturalWidth,_=y.naturalHeight);let T;try{D.width=z,D.height=_,M.drawImage(y,X,F,z,_,0,0,z,_),T=M.getImageData(0,0,z,_)}catch(U){const O=U instanceof Error&&(U.name==="SecurityError"||/tainted|getImageData/i.test(U.message));a(O?e.canvasTaintedError:U instanceof Error?U.message:e.decodeError);return}const me=(await Jl(async()=>{const{default:U}=await import("./jsQR-DqtlwVZ_.js").then(O=>O.j);return{default:U}},__vite__mapDeps([0,1,2]))).default,ae=(U,O,ne)=>me(U,O,ne);let H=ae(T.data,T.width,T.height);if(!(H!=null&&H.data)){const U=new Uint8ClampedArray(T.data.length);for(let O=0;O<T.data.length;O+=4)U[O]=255-T.data[O],U[O+1]=255-T.data[O+1],U[O+2]=255-T.data[O+2],U[O+3]=T.data[O+3];H=ae(U,T.width,T.height)}if(!(H!=null&&H.data)&&(z>1e3||_>1e3))try{const O=800/Math.max(z,_),ne=Math.round(z*O),ee=Math.round(_*O);if(D.width=ne,D.height=ee,M.drawImage(y,X,F,z,_,0,0,ne,ee),T=M.getImageData(0,0,ne,ee),H=ae(T.data,T.width,T.height),!(H!=null&&H.data)){const oe=new Uint8ClampedArray(T.data.length);for(let q=0;q<T.data.length;q+=4)oe[q]=255-T.data[q],oe[q+1]=255-T.data[q+1],oe[q+2]=255-T.data[q+2],oe[q+3]=T.data[q+3];H=ae(oe,T.width,T.height)}}catch{}if(!H||!H.data){a(e.qrNotFound);return}const Ce=H.data;if(!Ce.startsWith("otpauth://")){a(e.invalidOtpauth);return}const Z=new URL(Ce.replace("otpauth://","https://x/")),G=Z.searchParams.get("secret");if(!G){a(e.noSecretInQR);return}const se=Z.pathname.replace(/^\/totp\/?/i,"").replace(/^\//,""),P=decodeURIComponent(se||""),J=Z.searchParams.get("issuer")||"",ce=J?decodeURIComponent(J):P.split(":")[0]||"Unknown",te=P.includes(":")?P.split(":").slice(1).join(":").trim():P||"Account";try{await S(ce,te,G),s()}catch(U){const O=U instanceof Error?U.message:U&&typeof U=="object"&&"message"in U?String(U.message):typeof U=="string"?U:"",ee=O&&/schema cache|could not find the table/i.test(O)?` ${e.schemaCacheHint} ${e.connectedTo}: ${Vt}`:"";a(O?`${e.saveAccountError} ${O}.${ee}`:e.saveAccountError)}}catch(D){const M=D instanceof Error?D.message:D&&typeof D=="object"&&"message"in D?String(D.message):typeof D=="string"?D:"";a(M&&M!=="undefined"?M:e.decodeError)}finally{p(!1)}},[u,l,S,s,a,e]);return r.jsxs("div",{className:o?"absolute inset-0 flex flex-col overflow-auto p-3":"space-y-3",children:[!o&&r.jsx("p",{className:"text-[11px] text-text-muted",children:e.selectRegionThenScan}),r.jsxs("div",{ref:d,className:`relative overflow-hidden flex items-center justify-center ${o?"flex-1 min-h-0 rounded-lg bg-black/20":"border border-white/10 rounded-lg bg-black/20 max-h-[280px]"}`,onMouseDown:R,onMouseMove:I,onMouseUp:A,onMouseLeave:A,children:[r.jsx("img",{src:t,alt:"QR",className:o?"max-w-full max-h-full object-contain select-none":"max-w-full max-h-[260px] object-contain select-none",draggable:!1,onLoad:j,style:{pointerEvents:"none"}}),u&&u.w>5&&u.h>5&&r.jsx("div",{className:"absolute border-2 border-accent pointer-events-none",style:{left:u.x,top:u.y,width:u.w,height:u.h}})]}),r.jsx("canvas",{ref:c,className:"hidden"}),r.jsx("button",{type:"button",onClick:L,disabled:b,className:o?"mt-2 shrink-0 px-4 py-2 rounded-lg text-xs font-medium bg-accent/20 text-accent border border-accent/50 hover:bg-accent/30 disabled:opacity-50":"px-4 py-2 rounded-lg text-xs font-medium bg-accent/20 text-accent border border-accent/50 hover:bg-accent/30 disabled:opacity-50",children:b?e.decoding:e.scanCode})]})}const Gl=["#818CF8","#10B981","#A855F7","#FB923C","#EC4899","#3B82F6","#EAB308","#06B6D4","#F43F5E","#8B5CF6"];function Zl({open:e,boardId:t,editCategory:n,boards:s=[],onClose:a,onSave:o,onMoveToBoard:l}){var L;const[c,d]=i.useState(""),[u,f]=i.useState(!1),[h,x]=i.useState("#818CF8"),[g,C]=i.useState(15),[b,p]=i.useState(!1),[N,S]=i.useState("");if(i.useEffect(()=>{if(e){if(d((n==null?void 0:n.name)??""),n!=null&&n.color&&n.color.length===9){const y=n.color.slice(0,7),E=n.color.slice(7,9),D=parseInt(E,16),M=Math.round(D/255*100);f(!0),x(y),C(Number.isFinite(M)?M:15)}else n!=null&&n.color?(f(!0),x(n.color),C(15)):(f(!1),x("#818CF8"),C(15));S("")}},[e,n==null?void 0:n.name,n==null?void 0:n.color]),!e)return null;const j=n!=null&&n.board_id?s.filter(y=>y.id!==n.board_id).sort((y,E)=>y.sort_order-E.sort_order):s.slice().sort((y,E)=>y.sort_order-E.sort_order),R=!!n&&j.length>0&&l,I=async y=>{if(y.preventDefault(),!!c.trim()){p(!0);try{const E=u?`${h}${Math.round(g/100*255).toString(16).padStart(2,"0")}`:null;await o(c.trim(),E,n==null?void 0:n.id),a()}finally{p(!1)}}},A=()=>{n!=null&&n.id&&N&&l&&(l(n.id,N),a())};return r.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:a,children:r.jsxs("div",{className:"bg-sidebar border border-white/10 rounded-xl shadow-xl w-full max-w-sm p-4",onClick:y=>y.stopPropagation(),children:[r.jsx("h3",{className:"text-base font-semibold text-white mb-3",children:n?"Sa Category":"Thm Category"}),r.jsxs("form",{onSubmit:I,children:[r.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"Tn category"}),r.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),placeholder:"VD: Admin Portals",className:"w-full px-3 py-2 rounded-lg text-sm bg-white/5 border border-white/10 text-white placeholder-text-muted focus:ring-2 focus:ring-accent/40 focus:border-accent/40 mb-3",autoFocus:!0}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[r.jsx("label",{className:"block text-xs font-medium text-text-secondary",children:"Mu category"}),r.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-text-muted",children:[r.jsx("button",{type:"button",onClick:()=>f(!1),className:`px-2 py-0.5 rounded-full border text-[11px] ${u?"border-white/10 text-text-muted hover:border-white/30":"border-accent bg-accent/20 text-accent"}`,children:"Mc nh"}),r.jsx("button",{type:"button",onClick:()=>f(!0),className:`px-2 py-0.5 rounded-full border text-[11px] ${u?"border-accent bg-accent/20 text-accent":"border-white/10 text-text-muted hover:border-white/30"}`,children:"Tu chnh"})]})]}),u&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:Gl.map(y=>r.jsx("button",{type:"button",onClick:()=>x(y),className:`w-6 h-6 rounded-md transition ring-2 ring-offset-1 ring-offset-sidebar ${h===y?"ring-white":"ring-transparent hover:ring-white/30"}`,style:{backgroundColor:y}},y))}),r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-[11px] text-text-secondary",children:" m nn (Opacity)"}),r.jsxs("span",{className:"text-[11px] text-text-muted",children:[g,"%"]})]}),r.jsx("input",{type:"range",min:5,max:40,step:1,value:g,onChange:y=>C(Number(y.target.value)),className:"w-full accent-accent"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-[11px] text-text-muted",children:"Xem trc:"}),r.jsx("div",{className:"flex-1 px-3 py-2 rounded-lg border border-white/10 text-[11px] text-white/90",style:{backgroundColor:`${h}${Math.round(g/100*255).toString(16).padStart(2,"0")}`},children:"Category preview"})]})]})]}),R&&r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"Di chuyn sang board"}),r.jsxs("select",{value:N,onChange:y=>S(y.target.value),className:"w-full px-3 py-2 rounded-lg text-sm bg-white/5 border border-white/10 text-white focus:ring-2 focus:ring-accent/40 focus:border-accent/40",children:[r.jsx("option",{value:"",children:" Chn board "}),j.map(y=>r.jsx("option",{value:y.id,children:y.name},y.id))]}),N&&r.jsxs("button",{type:"button",onClick:A,className:"mt-1.5 w-full px-3 py-1.5 rounded-lg text-xs border border-accent/50 text-accent hover:bg-accent/10 flex items-center justify-center gap-1.5",children:[r.jsx("span",{className:"material-icons-round text-[14px]",children:"drive_file_move"}),'Move to "',(L=j.find(y=>y.id===N))==null?void 0:L.name,'"']})]}),r.jsxs("div",{className:"flex justify-end gap-1.5",children:[r.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 rounded-lg text-xs border border-white/10 text-text-secondary hover:bg-white/10",children:"Hy"}),r.jsx("button",{type:"submit",disabled:b||!c.trim(),className:"px-3 py-1.5 rounded-lg text-xs bg-accent text-white hover:bg-accent/90 disabled:opacity-50",children:b?"ang lu...":"Lu"})]})]})]})})}function ei({open:e,categories:t,editBookmark:n,initialUrl:s="",initialTitle:a="",defaultCategoryId:o,onClose:l,onSave:c}){const[d,u]=i.useState(""),[f,h]=i.useState(""),[x,g]=i.useState(""),[C,b]=i.useState(""),[p,N]=i.useState(!1);if(i.useEffect(()=>{var j;e&&(u((n==null?void 0:n.url)??s),h((n==null?void 0:n.title)??a),g((n==null?void 0:n.description)??""),b((n==null?void 0:n.category_id)??o??((j=t[0])==null?void 0:j.id)??""))},[e,n,s,a,o,t]),!e)return null;const S=async j=>{if(j.preventDefault(),!(!d.trim()||!f.trim()||!C)){N(!0);try{await c({url:d.trim(),title:f.trim(),description:x.trim(),category_id:C},n==null?void 0:n.id),l()}finally{N(!1)}}};return r.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:l,children:r.jsxs("div",{className:"bg-sidebar border border-white/10 rounded-xl shadow-xl w-full max-w-md p-4 max-h-[90vh] overflow-y-auto",onClick:j=>j.stopPropagation(),children:[r.jsx("h3",{className:"text-base font-semibold text-white mb-3",children:n?"Sa Bookmark":"Thm Bookmark"}),r.jsxs("form",{onSubmit:S,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"URL *"}),r.jsx("input",{type:"url",value:d,onChange:j=>u(j.target.value),placeholder:"https://...",className:"w-full px-3 py-2 rounded-lg text-sm bg-white/5 border border-white/10 text-white placeholder-text-muted focus:ring-2 focus:ring-accent/40",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"Tiu  *"}),r.jsx("input",{type:"text",value:f,onChange:j=>h(j.target.value),placeholder:"Tn bookmark",className:"w-full px-3 py-2 rounded-lg text-sm bg-white/5 border border-white/10 text-white placeholder-text-muted focus:ring-2 focus:ring-accent/40",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"M t"}),r.jsx("input",{type:"text",value:x,onChange:j=>g(j.target.value),placeholder:"Ty chn",className:"w-full px-3 py-2 rounded-lg text-sm bg-white/5 border border-white/10 text-white placeholder-text-muted focus:ring-2 focus:ring-accent/40"})]}),!n&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"Category"}),r.jsx("select",{value:C,onChange:j=>b(j.target.value),className:"w-full px-3 py-2 rounded-lg text-sm bg-white/5 border border-white/10 text-white focus:ring-2 focus:ring-accent/40",children:t.map(j=>r.jsx("option",{value:j.id,className:"bg-sidebar",children:j.name},j.id))})]}),r.jsxs("div",{className:"flex justify-end gap-1.5 pt-2",children:[r.jsx("button",{type:"button",onClick:l,className:"px-3 py-1.5 rounded-lg text-xs border border-white/10 text-text-secondary hover:bg-white/10",children:"Hy"}),r.jsx("button",{type:"submit",disabled:p||!d.trim()||!f.trim(),className:"px-3 py-1.5 rounded-lg text-xs bg-accent text-white hover:bg-accent/90 disabled:opacity-50",children:p?"ang lu...":"Lu"})]})]})]})})}function ti({open:e,title:t,message:n,confirmLabel:s="Xa",danger:a=!0,onConfirm:o,onCancel:l}){return e?r.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:l,children:r.jsxs("div",{className:"bg-sidebar border border-white/10 rounded-xl shadow-xl w-full max-w-sm p-4",onClick:c=>c.stopPropagation(),children:[r.jsx("h3",{className:"text-base font-semibold text-white mb-1.5",children:t}),r.jsx("p",{className:"text-xs text-text-secondary mb-4",children:n}),r.jsxs("div",{className:"flex justify-end gap-1.5",children:[r.jsx("button",{type:"button",onClick:l,className:"px-3 py-1.5 rounded-lg text-xs border border-white/10 text-text-secondary hover:bg-white/10",children:"Hy"}),r.jsx("button",{type:"button",onClick:o,className:`px-3 py-1.5 rounded-lg text-xs font-medium ${a?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-accent text-white hover:bg-accent/90"}`,children:s})]})]})}):null}function Mr(e,t){const n=["<!DOCTYPE NETSCAPE-Bookmark-file-1>","<!-- This is an automatically generated file. -->",'<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">',"<TITLE>Bookmarks</TITLE>","<H1>Bookmarks</H1>","<DL><p>"];return e.forEach(s=>{n.push("    <DT><H3>",Xt(s.name),"</H3>"),n.push("    <DL><p>"),t.filter(o=>o.category.board_id===s.id).forEach(({category:o,bookmarks:l})=>{n.push("        <DT><H3>",Xt(o.name),"</H3>"),n.push("        <DL><p>"),l.forEach(c=>{const d=Math.floor(new Date(c.created_at).getTime()/1e3);n.push('            <DT><A HREF="',Xt(c.url),'" ADD_DATE="',d,'">',Xt(c.title||c.url),"</A>")}),n.push("        </DL><p>")}),n.push("    </DL><p>")}),n.push("</DL><p>"),n.join("")}function Xt(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Tr(e,t="linkhub-bookmarks.html"){const n=new Blob([e],{type:"text/html;charset=utf-8"}),s=URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=t,a.click(),URL.revokeObjectURL(s)}const Tn=e=>e.toUpperCase();function Jn(e,t){const n=[],s=t.map(a=>Tn(a));for(let a=0;a<e.children.length;a++){const o=e.children[a];s.includes(o.tagName)&&n.push(o)}return n}function ni(e){let t=e.nextElementSibling;for(;t;){if(Tn(t.tagName)==="DL")return t;t=t.nextElementSibling}for(let n=0;n<e.children.length;n++)if(Tn(e.children[n].tagName)==="DL")return e.children[n];return null}function Cn(e){const t=[],n=Jn(e,["DT"]);for(const s of n){const a=s.querySelector("h3")??s.querySelector("H3");if(!a)continue;const o=(a.textContent??"").trim();if(!o)continue;const l=ni(s);l&&t.push({name:o,contentDL:l})}return t}function Sn(e){const t=[],n=Jn(e,["DT"]);for(const s of n){const a=s.querySelector("a");if(!a)continue;const o=(a.getAttribute("href")??"").trim(),l=(a.textContent??o).trim();o&&t.push({url:o,title:l||o})}return t}function ri(e){const t=Jn(e,["DT"])[0];return t?!!t.querySelector("h3"):!1}function si(e){const n=new DOMParser().parseFromString(e,"text/html"),s=n.querySelector("dl")??n.querySelector("DL");if(!s)return[];const a=[];let o=Cn(s);if(o.length===1){const l=Cn(o[0].contentDL);l.length>1&&(o=l)}if(o.length===0){const l=Sn(s);return l.length>0&&a.push({name:"Imported",categories:[{name:"General",bookmarks:l}]}),a}for(const{name:l,contentDL:c}of o){const d=[];if(ri(c)){const u=Cn(c);for(const{name:f,contentDL:h}of u){const x=Sn(h);d.push({name:f||"Uncategorized",bookmarks:x})}}else{const u=Sn(c);u.length>0&&d.push({name:l||"Uncategorized",bookmarks:u})}l&&a.push({name:l,categories:d})}return a}const xt=["#818CF8","#10B981","#A855F7","#FB923C","#EC4899","#3B82F6","#EAB308","#06B6D4"];function ai({category:e,activeCategoryId:t,fallbackDotColor:n,searchQuery:s,onOpenBookmark:a,cardHeight:o,fillContent:l,categoryMenuId:c,onOpenCategoryMenu:d,onEditCategory:u,onDuplicateCategory:f,onDeleteCategory:h,onAddBookmark:x,onEditBookmark:g,onDuplicateBookmark:C,onMoveBookmark:b,onDeleteBookmark:p,dragDropBookmark:N,draggedBookmark:S,dropBookmarkTarget:j,onBookmarkDragStart:R,onBookmarkDragOver:I,onBookmarkDrop:A,onBookmarkDragEnd:L}){const{attributes:y,listeners:E,setNodeRef:D,transform:M,transition:X,isDragging:F}=ys({id:e.id,transition:{duration:150,easing:"ease"}}),z=F||t===e.id,_={transform:et.Transform.toString(M),transition:X,opacity:z?0:1,pointerEvents:z?"none":void 0};return r.jsx("div",{ref:D,style:_,className:"break-inside-avoid",...y,...E,children:r.jsx(Ln,{category:e,fallbackDotColor:n,searchQuery:s,onOpenBookmark:a,cardHeight:o,fillContent:l,categoryMenuId:c,onOpenCategoryMenu:d,onEditCategory:u,onDuplicateCategory:f,onDeleteCategory:h,onAddBookmark:x,onEditBookmark:g,onDuplicateBookmark:C,onMoveBookmark:b,onDeleteBookmark:p,dragDropCategory:!0,sortableWrapper:!0,isDraggingCategory:F||t===e.id,dragDropBookmark:N,draggedBookmark:S,dropBookmarkTarget:j,onBookmarkDragStart:R,onBookmarkDragOver:I,onBookmarkDrop:A,onBookmarkDragEnd:L})})}function oi({initialAddBookmark:e,initialOpenAuthenticator:t,initialOpenItTools:n}){var tr,nr,rr;const{user:s}=_r(),a=ht(),{boards:o,setBoards:l,loading:c,error:d,refetch:u}=Bs(s==null?void 0:s.id),[f,h]=i.useState(null),{categories:x,setCategories:g,loading:C,refetch:b}=$s(f),[p,N]=i.useState(""),[S,j]=i.useState(!0),[R,I]=i.useState(!1),[A,L]=i.useState([]),[y,E]=i.useState([]),[D,M]=i.useState(!1),[X,F]=i.useState(!!e),[z,_]=i.useState(!1),[$,T]=i.useState(!1),me=i.useRef(null),[ae,H]=i.useState(!1),[Ce,Z]=i.useState(!!t),[G,se]=i.useState(!!n),[P,J]=i.useState(null),[ce,te]=i.useState(null),[U,O]=i.useState(!1),[ne,ee]=i.useState(null),[oe,q]=i.useState(null),[tt,Re]=i.useState(!1),[Ft,nt]=i.useState(null),[jt,Oe]=i.useState(null),[Ye,Ve]=i.useState(null),[Qe,xe]=i.useState({open:!1,title:"",message:"",onConfirm:()=>{}}),[zt,it]=i.useState(null),[_e,Ie]=i.useState(null),[Je,Nt]=i.useState(null),[Se,Ae]=i.useState(null),[ct,Ke]=i.useState(null),[Ct,Ge]=i.useState(!1),[Me,be]=i.useState({message:"",type:"success"});i.useEffect(()=>{const m=Y(a.locale);c?be({message:m.loadingBoards,type:"info"}):Me.message===m.loadingBoards&&be(w=>({...w,message:""}))},[c,a.locale,Me.message]),i.useEffect(()=>{var w,v;const m=Y(a.locale);if(C){const k=(w=o.find(W=>W.id===f))==null?void 0:w.name,B=k?`${m.loadingBoardPrefix} ${k}...`:m.loadingCategories;be({message:B,type:"info"})}else(Me.message===m.loadingCategories||(v=Me.message)!=null&&v.startsWith(`${m.loadingBoardPrefix} `))&&be(k=>({...k,message:""}))},[C,a.locale,Me.message,o,f]),i.useEffect(()=>{const m=Y(a.locale);D?be({message:m.loadingSearch,type:"info"}):Me.message===m.loadingSearch&&be(w=>({...w,message:""}))},[D,a.locale,Me.message]);const St=i.useRef(null),Ht=i.useRef(null),qt=i.useRef(null),[pe,we]=i.useState(!1),ye=i.useRef(null),Pe=i.useRef(null),[ke,je]=i.useState(!1),ue=p.trim().toLowerCase(),Ee=i.useMemo(()=>{if(!ue)return null;const m=o.filter(k=>k.name.toLowerCase().includes(ue)),w=A.filter(k=>k.name.toLowerCase().includes(ue)),v=y.filter(k=>(k.title??"").toLowerCase().includes(ue)||(k.url??"").toLowerCase().includes(ue));return{boardMatches:m,categoryMatches:w,bookmarkMatches:v}},[ue,o,A,y]);i.useEffect(()=>{const m=w=>{const v=w.target;me.current&&!me.current.contains(v)&&T(!1),St.current&&!St.current.contains(v)&&te(null),oe&&!w.target.closest("[data-category-menu]")&&q(null)};return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[oe]),i.useEffect(()=>{s!=null&&s.id&&(M(!0),(async()=>{try{const{data:m}=await K.from("categories").select("*").order("sort_order");L(m??[]);const{data:w}=await K.from("bookmarks").select("*").order("sort_order");E(w??[])}finally{M(!1)}})())},[s==null?void 0:s.id]),i.useEffect(()=>{if(!ce)return;const w=requestAnimationFrame(()=>{const v=Ht.current,k=qt.current;if(!v||!k)return;const B=v.getBoundingClientRect(),W=k.getBoundingClientRect(),re=window.innerHeight-B.bottom;we(re<W.height)});return()=>cancelAnimationFrame(w)},[ce]),i.useEffect(()=>{if(!$)return;const w=requestAnimationFrame(()=>{const v=Pe.current,k=ye.current;if(!v||!k)return;const B=v.getBoundingClientRect(),W=k.getBoundingClientRect(),re=window.innerHeight-B.bottom;je(re<W.height)});return()=>cancelAnimationFrame(w)},[$]),i.useEffect(()=>{if(!e)return;const m=Y(a.locale);if(o.length===0){xe({open:!0,title:m.addBookmark,message:m.addBookmarkNeedBoard,confirmLabel:m.createBoard,danger:!1,onConfirm:()=>{xe(w=>({...w,open:!1})),H(!0)}}),F(!1);return}if(x.length===0){xe({open:!0,title:m.addBookmark,message:m.addBookmarkNeedCategory,confirmLabel:m.createCategory,danger:!1,onConfirm:()=>{xe(w=>({...w,open:!1})),O(!0)}}),F(!1);return}F(!0)},[e,o.length,x.length,a.locale]),i.useEffect(()=>{t&&Z(!0)},[t]),i.useEffect(()=>{var w;let m=!1;try{if(typeof window<"u"){const v=window.localStorage.getItem("lastSidebarOpen");v!==null&&j(v==="true");const k=window.localStorage.getItem("lastSelectedBoardId");k&&h(k)}}catch{}try{if(typeof chrome<"u"&&((w=chrome.storage)!=null&&w.local)){chrome.storage.local.get(["lastSidebarOpen","lastSelectedBoardId"],v=>{try{typeof v.lastSidebarOpen=="boolean"&&j(v.lastSidebarOpen),typeof v.lastSelectedBoardId=="string"&&h(v.lastSelectedBoardId)}finally{m||(m=!0,I(!0))}});return}}catch{}m||(m=!0,I(!0))},[]),i.useEffect(()=>{R&&o.length>0&&(!f||!o.some(m=>m.id===f))&&h(o[0].id)},[o,f,R]),i.useEffect(()=>{var m;try{typeof window<"u"&&window.localStorage.setItem("lastSidebarOpen",String(S)),typeof chrome<"u"&&((m=chrome.storage)!=null&&m.local)&&chrome.storage.local.set({lastSidebarOpen:S})}catch{}},[S]),i.useEffect(()=>{var m;if(f)try{typeof window<"u"&&window.localStorage.setItem("lastSelectedBoardId",f),typeof chrome<"u"&&((m=chrome.storage)!=null&&m.local)&&chrome.storage.local.set({lastSelectedBoardId:f})}catch{}},[f]),i.useEffect(()=>{document.documentElement.classList.toggle("dark",a.theme==="dark"),document.documentElement.classList.toggle("light",a.theme==="light")},[a.theme]);const fe=()=>K.auth.signOut(),De=m=>{a.openLinkIn==="current_tab"?chrome.tabs.query({active:!0,currentWindow:!0},w=>{var v;(v=w[0])!=null&&v.id?chrome.tabs.update(w[0].id,{url:m}):chrome.tabs.create({url:m})}):chrome.tabs.create({url:m})},Te=async()=>{if(s!=null&&s.id)try{const{data:m}=await K.from("boards").select("*").eq("user_id",s.id).order("sort_order"),w=m??[],v=w.map($e=>$e.id);if(v.length===0){Tr(Mr([],[]));return}const{data:k}=await K.from("categories").select("*").in("board_id",v).order("sort_order"),B=k??[],W=B.map($e=>$e.id),{data:re}=await K.from("bookmarks").select("*").in("category_id",W.length?W:[""]).order("sort_order"),ve=re??[],de=B.map($e=>({category:$e,bookmarks:ve.filter(Et=>Et.category_id===$e.id)})),le=Mr(w,de);Tr(le)}catch(m){console.error("Export failed",m)}},Be=m=>{Ge(!0);const w=new FileReader;w.onload=async()=>{try{const v=w.result;if(m.name.endsWith(".json")){try{const de=JSON.parse(v);console.log("Import JSON (parse only, cha ghi Supabase):",de),be({message:Y(a.locale).importJsonNotSupported,type:"info"})}catch{be({message:Y(a.locale).importJsonInvalid,type:"error"})}Ge(!1);return}if(!(s!=null&&s.id)){be({message:Y(a.locale).importLoginRequired,type:"error"}),Ge(!1);return}const k=si(v);if(k.length===0){be({message:Y(a.locale).importHtmlEmpty,type:"error"}),Ge(!1);return}let B=o.length===0?0:Math.max(...o.map(de=>de.sort_order),0);for(const de of k){const{data:le,error:$e}=await K.from("boards").insert({user_id:s.id,name:de.name||"Imported",sort_order:++B}).select("id").single();if($e||!le){console.error("Import board failed",$e);continue}let Et=0;for(const sr of de.categories){const{data:ar,error:Is}=await K.from("categories").insert({board_id:le.id,name:sr.name||"Uncategorized",sort_order:Et++}).select("id").single();if(Is||!ar)continue;let Ms=0;for(const pn of sr.bookmarks)await K.from("bookmarks").insert({category_id:ar.id,url:pn.url,title:pn.title||pn.url,sort_order:Ms++})}}await u(),f&&await b();const W=k.reduce((de,le)=>de+le.categories.length,0),re=k.reduce((de,le)=>de+le.categories.reduce(($e,Et)=>$e+Et.bookmarks.length,0),0),ve=Y(a.locale).importSuccessFormat;be({message:ve.replace("{0}",String(k.length)).replace("{1}",String(W)).replace("{2}",String(re)),type:"success"})}catch(v){console.error("Import HTML failed",v),be({message:Y(a.locale).importHtmlFailed,type:"error"})}finally{Ge(!1)}},w.onerror=()=>{be({message:Y(a.locale).importHtmlFailed,type:"error"}),Ge(!1)},w.readAsText(m)},dt=async(m,w)=>{if(s!=null&&s.id){if(w)await K.from("boards").update({name:m,updated_at:new Date().toISOString()}).eq("id",w);else{const v=o.length===0?0:Math.max(...o.map(k=>k.sort_order),0);await K.from("boards").insert({user_id:s.id,name:m,sort_order:v+1})}await u(),H(!1),J(null)}},ut=m=>{xe({open:!0,title:"Xa Board",message:`Bn c chc mun xa board "${m.name}"? Ton b category v bookmark trong board s b xa.`,onConfirm:async()=>{var w;await K.from("boards").delete().eq("id",m.id),f===m.id&&h(((w=o.find(v=>v.id!==m.id))==null?void 0:w.id)??null),await u(),xe(v=>({...v,open:!1}))}})},Xe=async m=>{if(!(s!=null&&s.id))return;const w=o.length===0?0:Math.max(...o.map(W=>W.sort_order),0),{data:v,error:k}=await K.from("boards").insert({user_id:s.id,name:`${m.name} (bn sao)`,sort_order:w+1}).select("id").single();if(k||!v)return;const{data:B}=await K.from("categories").select("*, bookmarks(*)").eq("board_id",m.id).order("sort_order",{ascending:!0});for(const W of B??[]){const re=W.bookmarks??[],{data:ve}=await K.from("categories").insert({board_id:v.id,name:W.name,color:W.color??void 0,icon:W.icon??void 0,sort_order:W.sort_order}).select("id").single();if(ve)for(const de of re)await K.from("bookmarks").insert({category_id:ve.id,url:de.url,title:de.title,description:de.description??null,tags:de.tags??void 0,sort_order:de.sort_order})}await u(),await b(),te(null)},ft=async(m,w,v)=>{if(f){if(v)await K.from("categories").update({name:m,color:w??null,updated_at:new Date().toISOString()}).eq("id",v);else{const k=x.length===0?0:Math.max(...x.map(B=>B.sort_order),0);await K.from("categories").insert({board_id:f,name:m,color:w??null,sort_order:k+1})}await b(),O(!1),ee(null)}},kt=async(m,w)=>{var B;const{data:v}=await K.from("categories").select("sort_order").eq("board_id",w).order("sort_order",{ascending:!1}).limit(1),k=((B=v==null?void 0:v[0])==null?void 0:B.sort_order)??-1;await K.from("categories").update({board_id:w,sort_order:k+1,updated_at:new Date().toISOString()}).eq("id",m),await b(),O(!1),ee(null)},Kn=m=>{xe({open:!0,title:"Xa Category",message:`Xa category "${m.name}" v ton b bookmark bn trong?`,onConfirm:async()=>{await K.from("categories").delete().eq("id",m.id),await b(),xe(w=>({...w,open:!1}))}})},Xn=async m=>{if(!f)return;const w=x.length===0?0:Math.max(...x.map(B=>B.sort_order),0),{data:v}=await K.from("categories").insert({board_id:f,name:`${m.name} (bn sao)`,color:m.color??void 0,icon:m.icon??void 0,sort_order:w+1}).select("id").single();if(!v)return;const k=m.bookmarks??[];for(const B of k)await K.from("bookmarks").insert({category_id:v.id,url:B.url,title:B.title,description:B.description??null,tags:B.tags??void 0,sort_order:B.sort_order});await b(),q(null)},Ns=async(m,w)=>{var v;if(w)await K.from("bookmarks").update({url:m.url,title:m.title,description:m.description||null,category_id:m.category_id,updated_at:new Date().toISOString()}).eq("id",w);else{const k=x.find(W=>W.id===m.category_id),B=(v=k==null?void 0:k.bookmarks)!=null&&v.length?Math.max(...k.bookmarks.map(W=>W.sort_order),0)+1:0;await K.from("bookmarks").insert({category_id:m.category_id,url:m.url,title:m.title,description:m.description||null,sort_order:B})}await b(),Re(!1),nt(null),Oe(null)},Yn=m=>{xe({open:!0,title:"Xa Bookmark",message:`Xa "${m.title||m.url}"?`,onConfirm:async()=>{await K.from("bookmarks").delete().eq("id",m.id),await b(),xe(w=>({...w,open:!1}))}})},Vn=async m=>{var k;const w=x.find(B=>B.id===m.category_id),v=(k=w==null?void 0:w.bookmarks)!=null&&k.length?Math.max(...w.bookmarks.map(B=>B.sort_order),0)+1:0;await K.from("bookmarks").insert({category_id:m.category_id,url:m.url,title:m.title,description:m.description??null,tags:m.tags??void 0,sort_order:v}),await b()},Cs=async(m,w)=>{var B;if(m.category_id===w)return;const v=x.find(W=>W.id===w),k=(B=v==null?void 0:v.bookmarks)!=null&&B.length?Math.max(...v.bookmarks.map(W=>W.sort_order),0)+1:0;await K.from("bookmarks").update({category_id:w,sort_order:k,updated_at:new Date().toISOString()}).eq("id",m.id),await b(),Ve(null)},xn=m=>{const w=Y(a.locale);if(o.length===0){xe({open:!0,title:w.addBookmark,message:w.addBookmarkNeedBoard,confirmLabel:w.createBoard,danger:!1,onConfirm:()=>{xe(v=>({...v,open:!1})),H(!0)}});return}if(x.length===0){xe({open:!0,title:w.addBookmark,message:w.addBookmarkNeedCategory,confirmLabel:w.createCategory,danger:!1,onConfirm:()=>{xe(v=>({...v,open:!1})),O(!0)}});return}nt(null),Oe(m??null),Re(!0)},Ss=(m,w)=>{m.dataTransfer.setData("text/plain",w),m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("application/x-linkhub-board",w),m.dataTransfer.dropEffect="move",it(w)},ks=(m,w)=>{m.preventDefault(),m.dataTransfer.dropEffect="move",Ie(w)},Es=m=>{m.preventDefault();const w=m.dataTransfer.getData("application/x-linkhub-board")||m.dataTransfer.getData("text/plain");if(!w||_e==null){it(null),Ie(null);return}const v=o.findIndex(re=>re.id===w);if(v===-1||v===_e){it(null),Ie(null);return}const k=[...o],[B]=k.splice(v,1);k.splice(_e,0,B),l(k),it(null),Ie(null);const W=new Date().toISOString();(async()=>{for(let re=0;re<k.length;re++)await K.from("boards").update({sort_order:re,updated_at:W}).eq("id",k[re].id);await u()})()},Ds=()=>{it(null),Ie(null)},Rs=Vr(Yr(un,{activationConstraint:{distance:6}})),Os=i.useCallback(m=>{const{active:w,over:v}=m;if(Nt(null),!v||w.id===v.id)return;const k=x.findIndex(ve=>ve.id===w.id);if(k===-1)return;const B=x.findIndex(ve=>ve.id===v.id);if(B===-1)return;const W=mn(x,k,B);g(W);const re=new Date().toISOString();(async()=>{for(let ve=0;ve<W.length;ve++)await K.from("categories").update({sort_order:ve,updated_at:re}).eq("id",W[ve].id)})()},[x]),Qn=(m,w,v)=>{m.dataTransfer.setData("application/x-linkhub-bookmark",JSON.stringify({bookmarkId:w,categoryId:v})),m.dataTransfer.effectAllowed="move",m.dataTransfer.dropEffect="move",Ae({id:w,categoryId:v})},Gn=(m,w,v,k)=>{m.preventDefault(),m.stopPropagation(),m.dataTransfer.dropEffect="move",(Se==null?void 0:Se.categoryId)===v&&Ke({id:w,categoryId:v,index:k})},Zn=m=>{m.preventDefault(),m.stopPropagation();const w=m.dataTransfer.getData("application/x-linkhub-bookmark");if(!w||!ct){Ae(null),Ke(null);return}let v;try{v=JSON.parse(w)}catch{Ae(null),Ke(null);return}if(v.categoryId!==ct.categoryId){Ae(null),Ke(null);return}const k=x.find(le=>le.id===v.categoryId);if(!(k!=null&&k.bookmarks)){Ae(null),Ke(null);return}const B=k.bookmarks.findIndex(le=>le.id===v.bookmarkId),W=ct.index;if(B===-1||B===W){Ae(null),Ke(null);return}const re=[...k.bookmarks],[ve]=re.splice(B,1);re.splice(W,0,ve),g(x.map(le=>le.id===v.categoryId?{...le,bookmarks:re}:le)),Ae(null),Ke(null);const de=new Date().toISOString();(async()=>{for(let le=0;le<re.length;le++)await K.from("bookmarks").update({sort_order:le,updated_at:de}).eq("id",re[le].id);await b()})()},er=()=>{Ae(null),Ke(null)};return r.jsxs("div",{className:"bg-main font-display text-text-primary h-screen overflow-hidden flex selection:bg-accent selection:text-white",children:[r.jsxs("aside",{className:`sidebar-gradient border-r border-white/10 flex flex-col z-40 w-64 flex-shrink-0 fixed inset-y-0 left-0 transform transition-transform duration-200 ${S?"translate-x-0":"-translate-x-full"}`,children:[r.jsx("div",{className:"h-12 flex items-center px-4 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center gap-2 text-accent group cursor-pointer",children:[r.jsx("div",{className:"p-1.5 bg-accent/10 rounded-lg group-hover:bg-accent/20 transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"hub"})}),r.jsx("span",{className:"font-semibold text-sm tracking-tight text-white",children:"LinkHub"})]})}),r.jsxs("div",{className:"px-3 pt-2 pb-1 space-y-0.5",children:[r.jsxs("button",{type:"button",onClick:()=>Z(!0),className:"flex items-center gap-2 w-full px-2.5 py-2 text-xs font-medium rounded-lg text-left text-text-secondary hover:bg-white/5 hover:text-white border border-transparent transition",children:[r.jsx("span",{className:"material-symbols-outlined text-[18px] text-accent",children:"shield"}),r.jsx("span",{children:Y(a.locale).authenticator})]}),r.jsxs("button",{type:"button",onClick:()=>se(!0),className:"flex items-center gap-2 w-full px-2.5 py-2 text-xs font-medium rounded-lg text-left text-text-secondary hover:bg-white/5 hover:text-white border border-transparent transition",children:[r.jsx("span",{className:"material-symbols-outlined text-[18px] text-accent",children:"build"}),r.jsx("span",{children:"IT Tool box"})]})]}),r.jsxs("div",{className:"px-3 pt-3 pb-1.5 flex items-center justify-between",children:[r.jsx("span",{className:"text-[12px] font-semibold uppercase text-text-muted tracking-wider",children:"Boards"}),r.jsx("button",{type:"button",onClick:()=>{J(null),H(!0)},className:"p-1 rounded-lg text-text-muted hover:text-accent hover:bg-white/5 transition","aria-label":"Add board",children:r.jsx("span",{className:"material-icons-round text-base",children:"add_circle_outline"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto px-2 space-y-0.5 pb-3",children:[o.map((m,w)=>r.jsxs(Q.Fragment,{children:[a.dragDrop.board&&zt&&_e===w&&r.jsx("div",{className:"h-1 rounded-full bg-accent shadow-[0_0_10px_rgba(129,140,248,0.7)] transition-all duration-150 mx-1 mb-0.5 flex-shrink-0","aria-hidden":!0}),r.jsxs("div",{ref:ce===m.id?St:void 0,draggable:a.dragDrop.board,onDragStart:v=>a.dragDrop.board&&Ss(v,m.id),onDragOver:v=>a.dragDrop.board&&ks(v,w),onDrop:a.dragDrop.board?Es:void 0,onDragEnd:a.dragDrop.board?Ds:void 0,className:`relative transition-all duration-150 ${a.dragDrop.board?"cursor-grab active:cursor-grabbing":""} ${zt===m.id?"opacity-40 scale-[0.98]":""}`,children:[r.jsxs("button",{ref:ce===m.id?Ht:void 0,type:"button",onClick:()=>h(m.id),className:`flex items-center justify-between w-full px-2.5 py-2 text-xs font-medium rounded-lg transition text-left ${f===m.id?"bg-accent/15 text-accent border border-accent/25 shadow-[0_0_12px_rgba(129,140,248,0.12)]":"text-text-secondary hover:bg-white/5 hover:text-white border border-transparent"}`,children:[r.jsx("span",{className:"truncate",children:m.name}),r.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),te(k=>k===m.id?null:m.id)},className:"p-1 rounded hover:bg-white/10 flex-shrink-0","aria-label":"Menu",children:r.jsx("span",{className:"material-icons-round text-[14px] opacity-60",children:"more_horiz"})})]}),ce===m.id&&r.jsxs("div",{ref:qt,className:`absolute left-0 right-0 rounded-lg border border-white/10 bg-sidebar shadow-xl py-1 z-50 ${pe?"bottom-full mb-0.5":"top-full mt-0.5"}`,children:[r.jsxs("button",{type:"button",onClick:()=>{J(m),H(!0),te(null)},className:"flex items-center gap-1.5 w-full px-2.5 py-1.5 text-left text-xs text-text-secondary hover:bg-white/10 hover:text-white",children:[r.jsx("span",{className:"material-icons-round text-[16px]",children:"edit"}),Y(a.locale).edit]}),r.jsxs("button",{type:"button",onClick:()=>{Xe(m),te(null)},className:"flex items-center gap-1.5 w-full px-2.5 py-1.5 text-left text-xs text-text-secondary hover:bg-white/10 hover:text-white",children:[r.jsx("span",{className:"material-icons-round text-[16px]",children:"content_copy"}),Y(a.locale).duplicate]}),r.jsxs("button",{type:"button",onClick:()=>{ut(m),te(null)},className:"flex items-center gap-1.5 w-full px-2.5 py-1.5 text-left text-xs text-red-400 hover:bg-red-500/20",children:[r.jsx("span",{className:"material-icons-round text-[16px]",children:"delete"}),Y(a.locale).delete]})]})]})]},m.id)),!c&&o.length===0&&r.jsx("p",{className:"px-2 py-1.5 text-text-muted text-xs",children:"Cha c board"})]})]}),r.jsxs("main",{className:`flex-1 flex flex-col min-w-0 bg-cover bg-center relative transition-[margin] duration-200 ${S?"md:ml-64":"md:ml-0"}`,style:a.backgroundMode==="image"&&a.backgroundImageUrl?{backgroundImage:`url('${a.backgroundImageUrl}')`}:void 0,children:[r.jsx("div",{className:"absolute inset-0 backdrop-blur-[2px] z-0",style:{backgroundColor:`${a.backgroundColor}${Math.round((a.backgroundOverlayOpacity??90)/100*255).toString(16).padStart(2,"0")}`}}),r.jsxs("header",{className:"h-12 relative z-[100] flex items-center justify-between px-3 md:px-4 border-b border-white/10 bg-main/80 backdrop-blur-md",children:[r.jsxs("div",{className:"flex items-center flex-1 max-w-md",children:[r.jsx("button",{type:"button",onClick:()=>j(m=>!m),className:"mr-2 p-1.5 rounded-lg text-text-muted hover:text-white hover:bg-white/10 md:mr-3","aria-label":"Toggle sidebar",children:r.jsx("span",{className:"material-icons-round text-[20px]",children:S?"menu_open":"menu"})}),r.jsxs("div",{className:"relative flex-1 group",children:[r.jsx("span",{className:"material-symbols-outlined text-text-muted absolute left-3 top-1/2 -translate-y-1/2 text-[18px] transition-colors group-focus-within:text-accent",children:"search"}),r.jsx("input",{type:"text",placeholder:"Search your bookmarks...",value:p,onChange:m=>N(m.target.value),className:"bg-white/5 border border-white/10 text-xs text-white placeholder-text-muted focus:ring-2 focus:ring-accent/40 focus:border-accent/40 block w-full pl-9 pr-3 py-1.5 rounded-lg transition-all"})]})]}),r.jsxs("div",{className:"relative flex items-center gap-1.5 ml-2 md:ml-4",ref:me,children:[r.jsxs("button",{ref:Pe,type:"button",onClick:()=>T(m=>!m),className:"flex items-center gap-2 pl-1.5 pr-2.5 py-1.5 rounded-lg transition bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10",children:[r.jsx("div",{className:"h-7 w-7 rounded-full bg-accent/20 flex items-center justify-center text-accent font-semibold text-xs ring-1 ring-white/10",children:((tr=s==null?void 0:s.email)==null?void 0:tr.slice(0,1).toUpperCase())??"?"}),r.jsxs("div",{className:"flex flex-col items-start max-w-[120px]",children:[r.jsx("span",{className:"text-xs font-medium text-white leading-tight truncate w-full",children:((nr=s==null?void 0:s.user_metadata)==null?void 0:nr.full_name)??(s==null?void 0:s.email)??"User"}),r.jsx("span",{className:"text-[11px] text-text-muted leading-tight",children:"Member"})]}),r.jsx("span",{className:`material-icons-round text-text-muted text-lg transition-transform ${$?"rotate-180":""}`,children:"expand_more"})]}),$&&r.jsxs("div",{ref:ye,className:`absolute right-0 w-48 rounded-lg border border-white/10 bg-sidebar shadow-xl shadow-black/40 py-1 z-[110] overflow-hidden ${ke?"bottom-full mb-1.5":"top-full mt-1.5"}`,children:[r.jsxs("div",{className:"px-3 py-2 border-b border-white/10",children:[r.jsx("p",{className:"text-[11px] font-medium text-text-muted uppercase tracking-wider",children:Y(a.locale).signedInAs}),r.jsx("p",{className:"text-xs font-medium text-white truncate mt-0.5",children:s==null?void 0:s.email})]}),r.jsxs("button",{type:"button",onClick:()=>{_(!0),T(!1)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-xs text-text-secondary hover:bg-white/10 hover:text-white transition",children:[r.jsx("span",{className:"material-symbols-outlined text-base text-accent",children:"settings"}),Y(a.locale).settings]}),r.jsxs("button",{type:"button",onClick:()=>{fe(),T(!1)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-xs text-text-secondary hover:bg-red-500/20 hover:text-red-400 transition",children:[r.jsx("span",{className:"material-symbols-outlined text-base",children:"logout"}),Y(a.locale).logOut]})]})]})]}),r.jsx("div",{className:"px-4 py-3 z-10 flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsxs("button",{type:"button",onClick:()=>{ee(null),O(!0)},disabled:!f||o.length===0,title:o.length===0?Y(a.locale).createBoardFirst:void 0,className:"glass-panel text-white hover:bg-accent hover:border-accent text-xs font-medium px-3 py-2 rounded-lg transition-all flex items-center gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"add"}),Y(a.locale).createCategory]}),r.jsxs("button",{type:"button",onClick:()=>xn(),className:"glass-panel text-text-secondary hover:text-white hover:bg-white/10 text-xs font-medium px-3 py-2 rounded-lg transition flex items-center gap-1.5",children:[r.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"link"}),Y(a.locale).addBookmark]})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-6 z-10",children:[d&&r.jsx("p",{className:"text-red-400 text-xs py-3",children:d.message}),ue&&r.jsx("div",{className:"py-3",children:!D&&Ee&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[11px] font-semibold uppercase text-text-muted tracking-wider mb-1",children:"Boards"}),Ee.boardMatches.length===0?r.jsx("p",{className:"text-xs text-text-muted/70",children:"Khng c board ph hp."}):r.jsx("ul",{className:"space-y-1.5",children:Ee.boardMatches.map(m=>r.jsx("li",{children:r.jsxs("button",{type:"button",onClick:()=>{h(m.id),N("")},className:"w-full text-left px-3 py-1.5 rounded-lg bg-white/5 hover:bg-accent/20 text-xs text-white/90 transition flex items-center justify-between",children:[r.jsx("span",{className:"truncate",children:m.name}),r.jsx("span",{className:"text-[11px] text-text-muted ml-2",children:"Board"})]})},m.id))})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[11px] font-semibold uppercase text-text-muted tracking-wider mb-1",children:((rr=o.find(m=>m.id===f))==null?void 0:rr.name)??"Categories"}),Ee.categoryMatches.length===0?r.jsx("p",{className:"text-xs text-text-muted/70",children:"Khng c category ph hp."}):r.jsx("ul",{className:"space-y-1.5",children:Ee.categoryMatches.map(m=>{const w=o.find(v=>v.id===m.board_id);return r.jsx("li",{children:r.jsxs("button",{type:"button",onClick:()=>{h(m.board_id),N("")},className:"w-full text-left px-3 py-1.5 rounded-lg bg-white/5 hover:bg-accent/20 text-xs text-white/90 transition flex items-center justify-between",children:[r.jsx("span",{className:"truncate",children:m.name}),r.jsx("span",{className:"text-[11px] text-text-muted ml-2 truncate max-w-[160px]",children:(w==null?void 0:w.name)??"Board"})]})},m.id)})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[11px] font-semibold uppercase text-text-muted tracking-wider mb-1",children:"Bookmarks"}),Ee.bookmarkMatches.length===0?r.jsx("p",{className:"text-xs text-text-muted/70",children:"Khng c bookmark ph hp."}):r.jsx("ul",{className:"space-y-1.5",children:Ee.bookmarkMatches.map(m=>{const w=A.find(k=>k.id===m.category_id),v=w?o.find(k=>k.id===w.board_id):void 0;return r.jsx("li",{children:r.jsxs("button",{type:"button",onClick:()=>De(m.url),className:"w-full text-left px-3 py-1.5 rounded-lg bg-white/5 hover:bg-accent/20 text-xs text-white/90 transition flex flex-col items-start",children:[r.jsx("span",{className:"truncate",children:m.title||m.url}),r.jsxs("span",{className:"text-[11px] text-text-muted truncate max-w-full mt-0.5",children:[v!=null&&v.name?`${v.name}  `:"",(w==null?void 0:w.name)??""]})]})},m.id)})})]})]})}),!ue&&r.jsxs(r.Fragment,{children:[!C&&x.length===0&&f&&r.jsxs("div",{className:"text-text-muted text-xs py-6 text-center",children:[r.jsx("span",{className:"material-symbols-outlined text-3xl block mb-1.5 opacity-50",children:"folder_open"}),r.jsx("p",{children:"Cha c category. To category hoc thm bookmark."})]}),r.jsx("div",{className:`gap-2 space-y-2 columns-1 ${a.categoryColumns===2?"md:columns-2":a.categoryColumns===3?"md:columns-3":a.categoryColumns===5?"md:columns-5":a.categoryColumns===6?"md:columns-6":"md:columns-4"}`,children:a.dragDrop.category?r.jsxs(ms,{sensors:Rs,collisionDetection:Qr,onDragStart:({active:m})=>Nt(m.id),onDragEnd:Os,children:[r.jsx(bs,{items:x.map(m=>m.id),strategy:Wn,children:x.map((m,w)=>r.jsx(ai,{category:m,activeCategoryId:Je,fallbackDotColor:xt[w%xt.length],searchQuery:p,onOpenBookmark:De,cardHeight:a.categoryCardHeight,fillContent:a.categoryColorFillContent,categoryMenuId:oe,onOpenCategoryMenu:v=>q(k=>k===v?null:v),onEditCategory:()=>{ee(m),O(!0),q(null)},onDuplicateCategory:()=>{Xn(m),q(null)},onDeleteCategory:()=>{Kn(m),q(null)},onAddBookmark:()=>{xn(m.id),q(null)},onEditBookmark:v=>{nt(v),Re(!0),q(null)},onDuplicateBookmark:Vn,onMoveBookmark:v=>Ve(v),onDeleteBookmark:Yn,dragDropBookmark:a.dragDrop.bookmark,draggedBookmark:Se,dropBookmarkTarget:ct,onBookmarkDragStart:(v,k)=>Qn(v,k,m.id),onBookmarkDragOver:(v,k,B)=>Gn(v,k,m.id,B),onBookmarkDrop:Zn,onBookmarkDragEnd:er},m.id))}),r.jsx(wl,{dropAnimation:{duration:200,easing:"ease"},children:Je?(()=>{const m=x.find(v=>v.id===Je);if(!m)return null;const w=x.findIndex(v=>v.id===Je);return r.jsx("div",{className:"cursor-grabbing opacity-95 shadow-xl rounded-xl overflow-hidden w-[240px]",children:r.jsx(Ln,{category:m,fallbackDotColor:xt[w%xt.length],searchQuery:p,onOpenBookmark:De,cardHeight:a.categoryCardHeight,fillContent:a.categoryColorFillContent,categoryMenuId:null,onOpenCategoryMenu:()=>{},onEditCategory:()=>{},onDeleteCategory:()=>{},onAddBookmark:()=>{},onEditBookmark:()=>{},onDeleteBookmark:()=>{},dragDropCategory:!1,sortableWrapper:!1,dragDropBookmark:!1,draggedBookmark:null,dropBookmarkTarget:null,onBookmarkDragStart:void 0,onBookmarkDragOver:void 0,onBookmarkDrop:void 0,onBookmarkDragEnd:void 0})})})():null})]}):x.map((m,w)=>r.jsx(Ln,{category:m,fallbackDotColor:xt[w%xt.length],searchQuery:p,onOpenBookmark:De,cardHeight:a.categoryCardHeight,fillContent:a.categoryColorFillContent,categoryMenuId:oe,onOpenCategoryMenu:v=>q(k=>k===v?null:v),onEditCategory:()=>{ee(m),O(!0),q(null)},onDuplicateCategory:()=>{Xn(m),q(null)},onDeleteCategory:()=>{Kn(m),q(null)},onAddBookmark:()=>{xn(m.id),q(null)},onEditBookmark:v=>{nt(v),Re(!0),q(null)},onDuplicateBookmark:Vn,onMoveBookmark:v=>Ve(v),onDeleteBookmark:Yn,dragDropCategory:!1,sortableWrapper:!1,dragDropBookmark:a.dragDrop.bookmark,draggedBookmark:Se,dropBookmarkTarget:ct,onBookmarkDragStart:(v,k)=>Qn(v,k,m.id),onBookmarkDragOver:(v,k,B)=>Gn(v,k,m.id,B),onBookmarkDrop:Zn,onBookmarkDragEnd:er},m.id))})]})]})]}),r.jsx(Ll,{open:z,onClose:()=>_(!1),onExportHtml:Te,onImportFile:Be}),r.jsx(Hl,{open:G,onClose:()=>se(!1)}),r.jsx(Xl,{open:Ce,onClose:()=>Z(!1),userId:s==null?void 0:s.id}),r.jsx(_l,{open:ae,editBoard:P,onClose:()=>{H(!1),J(null)},onSave:dt}),r.jsx(Zl,{open:U,boardId:f,editCategory:ne?{id:ne.id,name:ne.name,color:ne.color??null,bg_opacity:ne.bg_opacity??null,board_id:ne.board_id}:null,boards:o,onClose:()=>{O(!1),ee(null)},onSave:ft,onMoveToBoard:kt}),r.jsx(ei,{open:tt||X,categories:x,editBookmark:Ft,initialUrl:(e==null?void 0:e.url)??"",initialTitle:(e==null?void 0:e.title)??"",defaultCategoryId:jt,onClose:()=>{Re(!1),F(!1),nt(null),Oe(null)},onSave:Ns}),r.jsx(ti,{open:Qe.open,title:Qe.title,message:Qe.message,confirmLabel:Qe.confirmLabel,danger:Qe.danger,onConfirm:Qe.onConfirm,onCancel:()=>xe(m=>({...m,open:!1}))}),Ct&&r.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"flex flex-col items-center gap-3 rounded-xl bg-sidebar border border-white/10 px-6 py-5 shadow-xl",children:[r.jsx("span",{className:"material-symbols-outlined animate-spin text-[32px] text-accent",children:"progress_activity"}),r.jsx("span",{className:"text-sm font-medium text-white",children:Y(a.locale).importLoading})]})}),r.jsx(Us,{message:Me.message,type:Me.type,open:!!Me.message,onClose:()=>be(m=>({...m,message:""}))}),r.jsx(li,{open:!!Ye,bookmark:Ye,boards:o,onClose:()=>Ve(null),onMove:m=>Ye&&Cs(Ye,m)})]})}function li({open:e,bookmark:t,boards:n,onClose:s,onMove:a}){const[o,l]=i.useState([]),[c,d]=i.useState(!1),u=n.map(x=>x.id).join(",");if(i.useEffect(()=>{if(!e||!t||n.length===0){l([]);return}let x=!1;return d(!0),(async()=>{const g=n.map(b=>b.id),{data:C}=await K.from("categories").select("id, name, board_id, sort_order").in("board_id",g).order("sort_order",{ascending:!0});!x&&C&&l(C??[]),d(!1)})(),()=>{x=!0}},[e,t==null?void 0:t.id,u]),!e)return null;const h=[...n].sort((x,g)=>x.sort_order-g.sort_order).map(x=>({board:x,categories:o.filter(g=>g.board_id===x.id).sort((g,C)=>g.sort_order-C.sort_order)}));return r.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:s,children:r.jsxs("div",{className:"bg-sidebar border border-white/10 rounded-xl shadow-xl w-full max-w-sm max-h-[80vh] flex flex-col overflow-hidden",onClick:x=>x.stopPropagation(),children:[r.jsx("h3",{className:"text-base font-semibold text-white px-4 py-3 border-b border-white/10",children:"Di chuyn bookmark"}),t&&r.jsx("p",{className:"px-4 py-1.5 text-xs text-text-muted truncate border-b border-white/5",children:t.title||t.url}),r.jsx("div",{className:"overflow-y-auto flex-1 p-2 min-h-0",children:c?r.jsx("p",{className:"text-xs text-text-muted py-4 text-center",children:"ang ti..."}):h.map(({board:x,categories:g})=>r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-[11px] font-semibold uppercase text-text-muted tracking-wider px-2 py-1",children:x.name}),r.jsxs("div",{className:"space-y-0.5",children:[g.map(C=>{const b=(t==null?void 0:t.category_id)===C.id;return r.jsxs("button",{type:"button",disabled:b,onClick:()=>{a(C.id),s()},className:`flex items-center gap-2 w-full px-3 py-2 rounded-lg text-left text-xs transition ${b?"opacity-50 cursor-not-allowed bg-white/5 text-text-muted":"text-text-secondary hover:bg-white/10 hover:text-white"}`,children:[r.jsx("span",{className:"font-medium truncate",children:C.name}),b&&r.jsx("span",{className:"text-[11px] text-text-muted flex-shrink-0",children:"(hin ti)"})]},C.id)}),g.length===0&&r.jsx("p",{className:"px-3 py-1.5 text-xs text-text-muted",children:"Cha c category"})]})]},x.id))}),r.jsx("div",{className:"p-2 border-t border-white/10",children:r.jsx("button",{type:"button",onClick:s,className:"w-full px-3 py-2 rounded-lg text-xs border border-white/10 text-text-secondary hover:bg-white/10",children:"Hy"})})]})})}function Ln({category:e,fallbackDotColor:t,searchQuery:n,onOpenBookmark:s,cardHeight:a,fillContent:o,categoryMenuId:l,onOpenCategoryMenu:c,onEditCategory:d,onDuplicateCategory:u,onDeleteCategory:f,onAddBookmark:h,onEditBookmark:x,onDuplicateBookmark:g,onMoveBookmark:C,onDeleteBookmark:b,dragDropCategory:p,sortableWrapper:N=!1,isDraggingCategory:S,dragDropBookmark:j,draggedBookmark:R,dropBookmarkTarget:I,onBookmarkDragStart:A,onBookmarkDragOver:L,onBookmarkDrop:y,onBookmarkDragEnd:E}){const D=ht(),{id:M,name:X,color:F,icon:z,bookmarks:_}=e,$=F||t,T=n?_.filter(G=>{var se,P;return((se=G.title)==null?void 0:se.toLowerCase().includes(n.toLowerCase()))||((P=G.url)==null?void 0:P.toLowerCase().includes(n.toLowerCase()))}):_,me=l===M,ae=i.useRef(null),H=i.useRef(null),[Ce,Z]=i.useState(!1);return i.useEffect(()=>{if(!me)return;const se=requestAnimationFrame(()=>{const P=ae.current,J=H.current;if(!P||!J)return;const ce=P.getBoundingClientRect(),te=J.getBoundingClientRect(),U=window.innerHeight-ce.bottom,O=ce.top>te.height,ne=U<te.height,ee=T.length<=2;Z(ee&&O||ne&&O)});return()=>cancelAnimationFrame(se)},[me]),r.jsxs("div",{"data-category-menu":!0,className:`relative glass-panel rounded-xl ${me&&Ce?"overflow-visible":"overflow-hidden"} shadow-glass group hover:border-white/10 transition-all duration-200 ${a==="equal"?"min-h-[240px] flex flex-col":""} ${p||N?"cursor-grab active:cursor-grabbing":""} ${S?"opacity-40 scale-[0.98]":""} ${me?"z-[999]":""}`,style:F&&o?{backgroundColor:F,backgroundImage:"none"}:void 0,children:[r.jsxs("div",{className:"px-2.5 py-0 border-b border-white/5 flex justify-between items-center bg-white/[0.02]",style:F?{backgroundColor:F}:void 0,children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[z?r.jsx("span",{className:"material-symbols-outlined text-[16px] text-white",children:z}):r.jsx("div",{className:"h-1.5 w-1.5 rounded-full flex-shrink-0",style:{backgroundColor:$,boxShadow:`0 0 6px ${$}80`}}),r.jsx("h3",{className:"font-bold text-xs text-white tracking-wide",children:X})]}),r.jsxs("div",{ref:ae,className:"relative",children:[r.jsx("button",{type:"button",onClick:G=>{G.stopPropagation(),c(M)},className:"text-text-muted hover:text-white transition opacity-0 group-hover:opacity-100 p-1 rounded","aria-label":"More",children:r.jsx("span",{className:"material-icons-round text-base",children:"more_horiz"})}),me&&r.jsxs("div",{ref:H,className:`absolute right-0 rounded-lg border border-white/10 bg-sidebar shadow-xl py-1 z-[999] min-w-[180px] whitespace-nowrap ${Ce?"bottom-full mb-0.5":"top-full mt-0.5"}`,children:[r.jsxs("button",{type:"button",onClick:d,className:"flex items-center gap-1.5 w-full px-2.5 py-1.5 text-left text-xs text-text-secondary hover:bg-white/10 hover:text-white",children:[r.jsx("span",{className:"material-icons-round text-[16px]",children:"edit"}),Y(D.locale).edit]}),r.jsxs("button",{type:"button",onClick:h,className:"flex items-center gap-1.5 w-full px-2.5 py-1.5 text-left text-xs text-text-secondary hover:bg-white/10 hover:text-white",children:[r.jsx("span",{className:"material-icons-round text-[16px]",children:"link"}),Y(D.locale).addBookmark]}),u&&r.jsxs("button",{type:"button",onClick:u,className:"flex items-center gap-1.5 w-full px-2.5 py-1.5 text-left text-xs text-text-secondary hover:bg-white/10 hover:text-white",children:[r.jsx("span",{className:"material-icons-round text-[16px]",children:"content_copy"}),Y(D.locale).duplicate]}),r.jsxs("button",{type:"button",onClick:f,className:"flex items-center gap-1.5 w-full px-2.5 py-1.5 text-left text-xs text-red-400 hover:bg-red-500/20",children:[r.jsx("span",{className:"material-icons-round text-[16px]",children:"delete"}),Y(D.locale).delete]})]})]})]}),r.jsx("ul",{className:`py-1.5 px-1 ${a==="equal"?"flex-1 flex flex-col":""}`,children:T.length===0?r.jsx("li",{className:"p-6 flex items-center justify-center text-text-muted/30",children:r.jsx("span",{className:"material-symbols-outlined text-3xl",children:"folder_open"})}):T.map((G,se)=>r.jsx(ii,{bookmark:G,index:se,onOpen:s,onEdit:x,onDuplicate:g,onMove:C,onDelete:b,dragDropEnabled:j,isDragging:(R==null?void 0:R.id)===G.id&&(R==null?void 0:R.categoryId)===M,isDropTarget:(I==null?void 0:I.categoryId)===M&&(I==null?void 0:I.index)===se,onDragStart:P=>A==null?void 0:A(P,G.id),onDragOver:P=>L==null?void 0:L(P,G.id,se),onDrop:y,onDragEnd:E},G.id))})]})}function ii({bookmark:e,index:t,onOpen:n,onEdit:s,onDuplicate:a,onMove:o,onDelete:l,dragDropEnabled:c,isDragging:d,isDropTarget:u,onDragStart:f,onDragOver:h,onDrop:x,onDragEnd:g}){const[C,b]=i.useState(!1),[p,N]=i.useState(null),[S,j]=i.useState({top:0,left:0}),R=i.useRef(null),I=i.useRef(null),A=()=>{var D;const E=(D=R.current)==null?void 0:D.getBoundingClientRect();E&&(N(E),j({top:E.bottom+2,left:E.right-160})),b(!0)},L=()=>{b(!1),N(null)};i.useEffect(()=>{if(!C)return;const E=D=>{var X,F;const M=D.target;(X=R.current)!=null&&X.contains(M)||(F=I.current)!=null&&F.contains(M)||L()};return document.addEventListener("click",E),()=>document.removeEventListener("click",E)},[C]),i.useLayoutEffect(()=>{if(!C||!p||!I.current)return;const D=I.current.getBoundingClientRect(),F=window.innerHeight-p.bottom<D.height?p.top-D.height-2:p.bottom+2,z=p.right-D.width;j({top:F,left:z})},[C,p]);const y=C&&p&&r.jsxs("div",{ref:I,className:"rounded-lg border border-white/10 bg-sidebar shadow-xl py-1 min-w-[160px] whitespace-nowrap",style:{position:"fixed",top:S.top,left:S.left,zIndex:9999},children:[r.jsxs("button",{type:"button",onClick:()=>{s(e),L()},className:"flex items-center gap-1.5 w-full px-2.5 py-1.5 text-left text-xs text-text-secondary hover:bg-white/10 hover:text-white",children:[r.jsx("span",{className:"material-icons-round text-[16px]",children:"edit"}),Y(ht().locale).edit]}),a&&r.jsxs("button",{type:"button",onClick:()=>{a(e),L()},className:"flex items-center gap-1.5 w-full px-2.5 py-1.5 text-left text-xs text-text-secondary hover:bg-white/10 hover:text-white",children:[r.jsx("span",{className:"material-icons-round text-[16px]",children:"content_copy"}),Y(ht().locale).duplicate]}),o&&r.jsxs("button",{type:"button",onClick:()=>{o(e),L()},className:"flex items-center gap-1.5 w-full px-2.5 py-1.5 text-left text-xs text-text-secondary hover:bg-white/10 hover:text-white",children:[r.jsx("span",{className:"material-icons-round text-[16px]",children:"drive_file_move"}),"Di chuyn"]}),r.jsxs("button",{type:"button",onClick:()=>{l(e),L()},className:"flex items-center gap-1.5 w-full px-2.5 py-1.5 text-left text-xs text-red-400 hover:bg-red-500/20",children:[r.jsx("span",{className:"material-icons-round text-[16px]",children:"delete"}),Y(ht().locale).delete]})]});return r.jsxs("li",{className:"relative",children:[u&&r.jsx("div",{className:"absolute left-2 right-2 top-0 h-1 rounded-full bg-accent shadow-[0_0_8px_rgba(129,140,248,0.6)] z-10 pointer-events-none","aria-hidden":!0}),r.jsxs("div",{ref:R,draggable:c,onDragStart:c?f:void 0,onDragOver:c?h:void 0,onDrop:c?x:void 0,onDragEnd:c?g:void 0,className:`relative flex items-center group/item transition-all duration-150 ${c?"cursor-grab active:cursor-grabbing":""} ${d?"opacity-40 scale-[0.98]":""}`,children:[r.jsxs("button",{type:"button",onClick:()=>n(e.url),className:"flex items-center gap-2 px-3 py-2 mx-0.5 rounded-lg hover:bg-white/10 transition-all duration-200 w-full text-left flex-1 min-w-0",children:[r.jsx("div",{className:"w-5 h-5 rounded flex items-center justify-center bg-slate-800 text-text-secondary text-[11px] font-bold border border-white/5 group-hover/item:border-accent/30 group-hover/item:text-accent transition-colors flex-shrink-0",children:t+1}),r.jsx("span",{className:"text-xs font-medium text-text-secondary group-hover/item:text-white transition-colors truncate",children:e.title||e.url})]}),r.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),C?L():A()},className:"p-1 rounded text-text-muted hover:text-white opacity-0 group-hover/item:opacity-100 transition absolute right-1.5","aria-label":"Menu",children:r.jsx("span",{className:"material-icons-round text-[14px]",children:"more_vert"})})]}),y&&pt.createPortal(y,document.body)]})}function ci(){const[e,t]=i.useState(""),[n,s]=i.useState(""),[a,o]=i.useState(null),[l,c]=i.useState(!1),d=on(),u=async f=>{f.preventDefault(),o(null),c(!0);try{const{error:h}=await K.auth.signInWithPassword({email:e,password:n});if(h)throw h;d("/",{replace:!0})}catch(h){o(h instanceof Error?h.message:"ng nhp tht bi")}finally{c(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:r.jsxs("div",{className:"w-full max-w-sm rounded-xl bg-white dark:bg-gray-800 shadow-lg p-4",children:[r.jsx("h1",{className:"text-base font-semibold text-center text-gray-900 dark:text-white mb-3",children:"ng nhp LinkHub"}),r.jsxs("form",{onSubmit:u,className:"space-y-2.5",children:[r.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:f=>t(f.target.value),required:!0,className:"w-full py-1.5 px-3 rounded-lg text-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),r.jsx("input",{type:"password",placeholder:"Mt khu",value:n,onChange:f=>s(f.target.value),required:!0,className:"w-full py-1.5 px-3 rounded-lg text-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),a&&r.jsx("p",{className:"text-xs text-red-600",children:a}),r.jsx("button",{type:"submit",disabled:l,className:"w-full py-1.5 rounded-lg text-xs bg-primary-600 hover:bg-primary-700 text-white font-medium disabled:opacity-50",children:l?"ang ng nhp...":"ng nhp"})]}),r.jsxs("p",{className:"mt-3 text-center text-xs text-gray-500",children:["Cha c ti khon? ",r.jsx(Wr,{to:"/register",className:"text-primary-600 hover:underline",children:"ng k"})]})]})})}function di(){const[e,t]=i.useState(""),[n,s]=i.useState(""),[a,o]=i.useState(null),[l,c]=i.useState(!1),d=on(),u=async f=>{f.preventDefault(),o(null),c(!0);try{const{error:h}=await K.auth.signUp({email:e,password:n});if(h)throw h;d("/",{replace:!0})}catch(h){o(h instanceof Error?h.message:"ng k tht bi")}finally{c(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:r.jsxs("div",{className:"w-full max-w-sm rounded-xl bg-white dark:bg-gray-800 shadow-lg p-4",children:[r.jsx("h1",{className:"text-base font-semibold text-center text-gray-900 dark:text-white mb-3",children:"ng k LinkHub"}),r.jsxs("form",{onSubmit:u,className:"space-y-2.5",children:[r.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:f=>t(f.target.value),required:!0,className:"w-full py-1.5 px-3 rounded-lg text-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),r.jsx("input",{type:"password",placeholder:"Mt khu",value:n,onChange:f=>s(f.target.value),required:!0,className:"w-full py-1.5 px-3 rounded-lg text-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),a&&r.jsx("p",{className:"text-xs text-red-600",children:a}),r.jsx("button",{type:"submit",disabled:l,className:"w-full py-1.5 rounded-lg text-xs bg-primary-600 hover:bg-primary-700 text-white font-medium disabled:opacity-50",children:l?"ang ng k...":"ng k"})]}),r.jsxs("p",{className:"mt-3 text-center text-xs text-gray-500",children:[" c ti khon? ",r.jsx(Wr,{to:"/login",className:"text-primary-600 hover:underline",children:"ng nhp"})]})]})})}function ui(){const{session:e,loading:t}=_r(),[n,s]=i.useState(null),[a,o]=i.useState(!1),[l,c]=i.useState(!1);return i.useEffect(()=>{const d=new URLSearchParams(window.location.search);d.get("add")==="1"&&s({url:d.get("url")??"",title:d.get("title")??""}),d.get("open")==="authenticator"&&o(!0),d.get("open")==="it-tools"&&c(!0)},[]),t?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsx("div",{className:"animate-pulse text-gray-500",children:"ang ti..."})}):r.jsx(Fs,{children:r.jsxs(Ta,{children:[r.jsx(Dt,{path:"/login",element:e?r.jsx(Wt,{to:"/",replace:!0}):r.jsx(ci,{})}),r.jsx(Dt,{path:"/register",element:e?r.jsx(Wt,{to:"/",replace:!0}):r.jsx(di,{})}),r.jsx(Dt,{path:"/",element:e?r.jsx(oi,{initialAddBookmark:n??void 0,initialOpenAuthenticator:a,initialOpenItTools:l}):r.jsx(Wt,{to:"/login",replace:!0})}),r.jsx(Dt,{path:"*",element:r.jsx(Wt,{to:"/",replace:!0})})]})})}Ls.createRoot(document.getElementById("root")).render(r.jsx(Q.StrictMode,{children:r.jsx(Ua,{children:r.jsx(ui,{})})}));
